{
  "permissions": {
    "allow": [
      "Bash(grep:*)",
      "Bash(find:*)",
      "Bash(pnpm install:*)",
      "Bash(npm install:*)",
      "Bash(node --version:*)",
      "Bash(/usr/local/bin/node:*)",
      "Bash(/opt/homebrew/bin/node:*)",
      "Bash(/opt/homebrew/bin/brew:*)",
      "Bash(/usr/local/bin/brew:*)",
      "Bash(export PATH=\"/opt/homebrew/opt/node@22/bin:$PATH\")",
      "Bash(npm:*)",
      "Bash(corepack enable)",
      "Bash(corepack prepare:*)",
      "Bash(ls:*)",
      "Bash(lsof:*)",
      "Bash(/usr/local/bin/npm run start)",
      "Bash(/opt/homebrew/bin/npm run start)",
      "Bash(~/.nvm/versions/node/*/bin/npm)",
      "Bash(run start)",
      "Bash(export PATH=\"/opt/homebrew/bin:$PATH\")",
      "Bash(curl:*)",
      "Bash(/opt/homebrew/bin/npm run build)",
      "Bash(npx tsc:*)",
      "Bash(export PATH=\"/opt/homebrew/bin:/usr/bin:$PATH\")",
      "Bash(/usr/bin/head:*)",
      "Bash(export PATH=\"/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:$PATH\")",
      "Bash(export PATH=\"/usr/local/bin:/opt/homebrew/bin:$PATH\")",
      "Bash(/opt/homebrew/bin/npx tsc --noEmit)",
      "Bash(/Users/salaheddineaitnasser/.nvm/versions/node/v22.14.0/bin/npx tsc --noEmit --skipLibCheck)",
      "Bash(open \"https://supabase.com/dashboard/project/ogjghzgzkxxoggocadln/sql/new\")",
      "Bash(/opt/homebrew/bin/npx tsc --noEmit --skipLibCheck)",
      "Bash(xargs kill:*)",
      "Bash(pkill:*)",
      "Bash(killall node:*)",
      "Bash(/opt/homebrew/bin/npm install @dnd-kit/core @dnd-kit/sortable @dnd-kit/utilities)",
      "Bash(source ~/.zshrc)",
      "Bash(export PATH=\"/opt/homebrew/bin:/usr/local/bin:$PATH\")",
      "WebFetch(domain:supabase.com)",
      "Bash(SQL='\ncreate table if not exists public.universes \\(\n  id uuid primary key default gen_random_uuid\\(\\),\n  slug text not null unique,\n  label_fr text not null,\n  label_en text not null,\n  icon_name text not null default ''''Circle'''',\n  color text not null default ''''#a3001d'''',\n  sort_order int not null default 0,\n  is_active boolean not null default true,\n  created_at timestamptz not null default now\\(\\),\n  updated_at timestamptz not null default now\\(\\)\n\\);\n')",
      "Bash(node:*)",
      "Bash(npx supabase:*)",
      "Bash(export PATH=\"$HOME/.nvm/versions/node/v22.14.0/bin:$PATH\":*)",
      "Bash(export PATH=\"/Users/salaheddineaitnasser/.nvm/versions/node/v22.14.0/bin:$PATH\")",
      "Bash(npx:*)",
      "Bash(export PATH=\"/opt/homebrew/Cellar/node/25.4.0/bin:/opt/homebrew/bin:$PATH\")",
      "Bash(open \"http://localhost:5180/admin/homepage\")",
      "WebFetch(domain:localhost)",
      "Bash(/opt/homebrew/bin/npm --version)",
      "Bash(PATH=\"/opt/homebrew/bin:$PATH\" npm run dev:*)",
      "Bash(cd:*)",
      "Bash(source ~/.bashrc)",
      "Bash(export PATH=\"/opt/homebrew/bin:/usr/bin:/bin:$PATH\")",
      "Bash(PATH=\"/Users/salaheddineaitnasser/.nvm/versions/node/v20.19.3/bin:/opt/homebrew/bin:/usr/local/bin:/usr/bin:/bin\")",
      "Bash(export PATH=\"/usr/bin:/bin:/usr/sbin:/sbin:/opt/homebrew/bin:$PATH\")",
      "Bash(/Users/salaheddineaitnasser/.nvm/versions/node/v20.10.0/bin/npx tsc --noEmit -p client)",
      "Bash(/opt/homebrew/bin/npm run dev)",
      "Bash(source:*)",
      "Bash(nvm use:*)",
      "Bash(ipconfig getifaddr:*)",
      "Bash(export PATH=\"/opt/homebrew/bin:$PATH:/usr/bin\")",
      "Bash(/opt/homebrew/bin/npm run build --prefix \"/Users/salaheddineaitnasser/Downloads/SAM''BOOKING - OFFICIAL\")",
      "Bash(/usr/bin/tail:*)",
      "Bash(PATH=\"/opt/homebrew/bin:$PATH\" node ./node_modules/typescript/bin/tsc:*)",
      "mcp__Claude_in_Chrome__javascript_tool",
      "Bash(/opt/homebrew/bin/npm install @sentry/node --save)",
      "Bash(/usr/local/bin/npm install @sentry/node --save)",
      "Bash(export PATH=\"/opt/homebrew/bin:/usr/local/bin:/usr/bin:$PATH\")",
      "Bash(/opt/homebrew/bin/npm install --prefix \"/Users/salaheddineaitnasser/Downloads/SAM''BOOKING - OFFICIAL\")",
      "Bash(/usr/bin/env bash:*)",
      "Bash(PATH=\"/opt/homebrew/bin:/opt/homebrew/Cellar/node/25.4.0/bin:$PATH\" /opt/homebrew/bin/node /opt/homebrew/Cellar/node/25.4.0/bin/npm install:*)",
      "Bash(PATH=\"/opt/homebrew/bin:/opt/homebrew/Cellar/node/25.4.0/bin:$PATH\" /opt/homebrew/bin/node:*)",
      "Bash(PATH=\"/opt/homebrew/bin:$PATH\" /opt/homebrew/bin/node:*)",
      "Bash(xargs:*)",
      "Bash(pbcopy)",
      "Bash(kill:*)",
      "Bash(/Users/salaheddineaitnasser/.nvm/versions/node/v20.17.0/bin/npx tsc --noEmit)",
      "Bash(export NVM_DIR=\"$HOME/.nvm\")",
      "Bash([ -s \"$NVM_DIR/nvm.sh\" ])",
      "Bash(. \"$NVM_DIR/nvm.sh\")",
      "Bash(python3:*)",
      "Bash(cat:*)",
      "Bash(/opt/homebrew/bin/npm run check)",
      "Bash(export PATH=\"$PATH:/usr/local/bin:/opt/homebrew/bin:$HOME/.volta/bin\")",
      "Bash(export PATH=\"$PATH:/opt/homebrew/bin:/usr/bin\")",
      "Bash(/usr/local/bin/npm --version)",
      "Bash(/usr/local/bin/npm run dev)",
      "Bash(export PATH=$PATH:/usr/local/bin:/opt/homebrew/bin:$HOME/.nvm/versions/node/v20.11.0/bin)",
      "Bash(/opt/homebrew/bin/npm run build --prefix /Users/salaheddineaitnasser/Downloads/SAM''BOOKING - OFFICIAL)",
      "Bash(PATH=/opt/homebrew/bin:$PATH /opt/homebrew/bin/node /opt/homebrew/bin/npm run build:*)",
      "Bash(PATH=/opt/homebrew/bin:$PATH /opt/homebrew/bin/npx tsc --noEmit --project client/tsconfig.json)",
      "Bash(/usr/bin/curl -s http://localhost:8080/api/ping)",
      "Bash(/usr/bin/wc:*)",
      "Bash(PATH=\"/opt/homebrew/bin:/usr/local/bin:$PATH\")",
      "Bash(PATH=\"/opt/homebrew/bin:$PATH\" npx tsc:*)",
      "Bash(PATH=\"/opt/homebrew/bin:$PATH\" /opt/homebrew/bin/node ./node_modules/.bin/vite:*)",
      "Bash(PATH=\"/opt/homebrew/bin:$PATH\" npx supabase:*)",
      "Bash(echo:*)",
      "Bash(PATH=\"/opt/homebrew/bin:$PATH\" /opt/homebrew/bin/node -e:*)",
      "Bash(PATH=\"/opt/homebrew/bin:$PATH\" /opt/homebrew/bin/node -e \"\nconst { createClient } = require\\(''@supabase/supabase-js''\\);\n\nconst supabase = createClient\\(\n  ''https://ogjghzgzkxxoggocadln.supabase.co'',\n  ''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9namdoemd6a3h4b2dnb2NhZGxuIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2NjE3NTAyOCwiZXhwIjoyMDgxNzUxMDI4fQ.sniHdQ-EWw2ZdMj2gEjnrIvwLyinoLlVQ0aJL3-BNww''\n\\);\n\nasync function checkTables\\(\\) {\n  // Try to select from ad_wallets\n  const { data: wallets, error: walletsError } = await supabase\n    .from\\(''ad_wallets''\\)\n    .select\\(''id''\\)\n    .limit\\(1\\);\n  \n  console.log\\(''ad_wallets:'', walletsError ? ''ERROR: '' + walletsError.message : ''OK''\\);\n\n  // Try to select from ad_auction_config  \n  const { data: config, error: configError } = await supabase\n    .from\\(''ad_auction_config''\\)\n    .select\\(''*''\\)\n    .limit\\(5\\);\n  \n  console.log\\(''ad_auction_config:'', configError ? ''ERROR: '' + configError.message : ''OK - '' + \\(config?.length || 0\\) + '' rows''\\);\n  \n  if \\(config && config.length > 0\\) {\n    console.log\\(''Config data:'', JSON.stringify\\(config, null, 2\\)\\);\n  }\n}\n\ncheckTables\\(\\).catch\\(console.error\\);\n\")",
      "Bash(export PATH=\"/opt/homebrew/bin:/usr/bin:/bin:/usr/sbin:$PATH\")",
      "Bash(/opt/homebrew/bin/npm run typecheck)",
      "Bash(git commit:*)",
      "Bash(git push:*)",
      "Bash(git config:*)",
      "Bash(ssh-keygen:*)",
      "Bash(ssh-add:*)",
      "Bash(git remote set-url:*)",
      "Bash(ssh:*)",
      "Bash(ssh-keyscan:*)",
      "Bash(~/.ssh/known_hosts)",
      "Bash(env)",
      "Bash(/bin/zsh -i -c \"which npm && npm --version\")",
      "Bash(/bin/zsh -i -c \"which brew\")",
      "Bash(open:*)",
      "Bash(/usr/local/bin/npm install)",
      "Bash(head:*)",
      "Bash(# Kill the current node process on port 8080 kill -9 69769 || echo \"\"Process not found\"\" sleep 2 lsof -i :8080 -P)",
      "Bash(mysql.server start:*)",
      "Bash(brew services:*)",
      "Bash(# Check if MySQL is installed via different methods which mysqld || ls /usr/local/mysql/bin/mysqld || ls /opt/homebrew/bin/mysqld || echo \"\"MySQL not found in common locations\"\" # Check if MySQL is already running ps aux)",
      "Bash(# Check for MAMP ls /Applications/MAMP/Library/bin/mysql && echo \"\"MAMP found\"\" # Check for Docker docker ps)",
      "Bash(# Check if docker is available and running docker --version && docker ps)",
      "Bash(# Check if there''s a docker-compose in menu_sam ls /Users/salaheddineaitnasser/Downloads/Sortir\\\\ Au\\\\ Maroc\\\\ -\\\\ Official/menu_sam/docker* || echo \"\"No docker files\"\" # Check the .env for database URL cat /Users/salaheddineaitnasser/Downloads/Sortir\\\\ Au\\\\ Maroc\\\\ -\\\\ Official/menu_sam/.env)",
      "Bash(# Try to find mysql in system paths export PATH=\"\"/usr/local/mysql/bin:/opt/homebrew/opt/mysql/bin:/opt/homebrew/bin:$PATH\"\" which mysql || find /usr -name \"\"mysql\"\" -type f)",
      "Bash(/opt/homebrew/bin/mysql:*)",
      "mcp__mcp-registry__search_mcp_registry",
      "Bash(netlify:*)",
      "Bash(pnpm add:*)",
      "Bash(pnpm dev)",
      "WebFetch(domain:unsplash.com)",
      "Bash(dig:*)",
      "Bash(whois:*)",
      "Bash(openssl pkcs12:*)",
      "Bash(openssl x509:*)",
      "Bash(openssl md5:*)",
      "Bash(# Extraire la clé publique de la clé privée openssl rsa -in \"\"/Users/salaheddineaitnasser/Downloads/Sortir Au Maroc - Official/server/certs/signerKey.pem\"\" -passin pass:qavweIc2swPzhGItgfz4BZ8iH3105un -pubout)",
      "Bash(# Extraire seulement la clé privée sans les attributs openssl pkcs12 -in \"\"/Users/salaheddineaitnasser/Downloads/Sortir Au Maroc - Official/server/certs/apple-wallet.p12\"\" \\\\ -nocerts -nodes \\\\ -passin pass:qavweIc2swPzhGItgfz4BZ8iH3105un)",
      "Bash(openssl rsa -out \"/Users/salaheddineaitnasser/Downloads/Sortir Au Maroc - Official/server/certs/signerKey.pem\")",
      "Bash(# Extraire la clé privée et l''encrypter avec le mot de passe openssl pkcs12 -in \"\"/Users/salaheddineaitnasser/Downloads/Sortir Au Maroc - Official/server/certs/apple-wallet.p12\"\" \\\\ -nocerts \\\\ -passin pass:qavweIc2swPzhGItgfz4BZ8iH3105un \\\\ -passout pass:qavweIc2swPzhGItgfz4BZ8iH3105un)",
      "Bash(base64 -d file /tmp/test.pkpass unzip -l /tmp/test.pkpass)",
      "Bash(openssl genrsa:*)",
      "Bash(openssl req -new -key pass-sambooking-key.pem -out pass-sambooking.csr -subj \"/emailAddress=s.aitnasser@me.com/CN=SAMBooking Wallet/C=MA/O=SAY MEDIA\")",
      "Bash(openssl rsa:*)",
      "Bash(openssl req -noout -modulus -in pass-sambooking.csr)",
      "Bash(git rebase:*)",
      "Bash(GIT_EDITOR=true git rebase:*)",
      "Bash(git add:*)",
      "Bash(for file in *.sql)",
      "Bash(do grep -q \"CREATE TABLE public.consumer_users\" \"$file\")",
      "Bash(done)",
      "Bash(sort:*)",
      "Bash(# List all tables in the public schema curl -s \"\"https://ogjghzgzkxxoggocadln.supabase.co/rest/v1/\"\" \\\\ -H \"\"apikey: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9namdoemd6a3h4b2dnb2NhZGxuIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2NjE3NTAyOCwiZXhwIjoyMDgxNzUxMDI4fQ.sniHdQ-EWw2ZdMj2gEjnrIvwLyinoLlVQ0aJL3-BNww\"\" \\\\ -H \"\"Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9namdoemd6a3h4b2dnb2NhZGxuIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2NjE3NTAyOCwiZXhwIjoyMDgxNzUxMDI4fQ.sniHdQ-EWw2ZdMj2gEjnrIvwLyinoLlVQ0aJL3-BNww\"\" \\\\ -H \"\"Accept: application/json\"\")",
      "Bash(# List all tables - use node instead of python curl -s \"\"https://ogjghzgzkxxoggocadln.supabase.co/rest/v1/\"\" \\\\ -H \"\"apikey: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9namdoemd6a3h4b2dnb2NhZGxuIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2NjE3NTAyOCwiZXhwIjoyMDgxNzUxMDI4fQ.sniHdQ-EWw2ZdMj2gEjnrIvwLyinoLlVQ0aJL3-BNww\"\" \\\\ -H \"\"Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9namdoemd6a3h4b2dnb2NhZGxuIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2NjE3NTAyOCwiZXhwIjoyMDgxNzUxMDI4fQ.sniHdQ-EWw2ZdMj2gEjnrIvwLyinoLlVQ0aJL3-BNww\"\" \\\\ -H \"\"Accept: application/json\"\")",
      "Bash(SB=\"https://ogjghzgzkxxoggocadln.supabase.co\")",
      "Bash(KEY=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9namdoemd6a3h4b2dnb2NhZGxuIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2NjE3NTAyOCwiZXhwIjoyMDgxNzUxMDI4fQ.sniHdQ-EWw2ZdMj2gEjnrIvwLyinoLlVQ0aJL3-BNww\")",
      "Bash(__NEW_LINE_561e5b82a59cd923__ echo \"=== RESERVATIONS \\(all columns\\) ===\")",
      "Bash(__NEW_LINE_561e5b82a59cd923__ echo \"\")",
      "Bash(__NEW_LINE_bc368c9281690940__ curl -s \"$SB/rest/v1/newsletter_subscribers?select=*&limit=10\" -H \"apikey: $KEY\" -H \"Authorization: Bearer $KEY\")",
      "Bash(__NEW_LINE_9e568dc63c98e095__ curl -s \"$SB/rest/v1/support_chat_messages?select=*&limit=5\" -H \"apikey: $KEY\" -H \"Authorization: Bearer $KEY\")",
      "Bash(__NEW_LINE_cb558d73b6f64030__ curl -s \"$SB/rest/v1/dm_messages?select=*&limit=5\" -H \"apikey: $KEY\" -H \"Authorization: Bearer $KEY\")",
      "Bash(__NEW_LINE_dfcbe7681fe3c0a4__ curl -s \"$SB/rest/v1/search_history?select=*&limit=5\" -H \"apikey: $KEY\" -H \"Authorization: Bearer $KEY\")",
      "Bash(__NEW_LINE_f2e32e676414855e__ curl -s \"$SB/rest/v1/pro_onboarding_requests?select=*&limit=5\" -H \"apikey: $KEY\" -H \"Authorization: Bearer $KEY\")",
      "Bash(GIT_DIFF_OPTS=\"\" /usr/bin/git -C \"/Users/salaheddineaitnasser/Downloads/Sortir Au Maroc - Official\" diff --no-ext-diff -- server/routes/public.ts)",
      "Bash(/usr/bin/git status --short)",
      "Bash(pnpm run build:*)",
      "Bash(for file in /Users/salaheddineaitnasser/Downloads/Sortir Au Maroc - Official/client/components/pro/tabs/*.tsx)",
      "Bash(for file in /Users/salaheddineaitnasser/Downloads/Sortir Au Maroc - Official/client/components/pro/*.tsx)",
      "Bash(wc:*)",
      "Bash(for f in /Users/salaheddineaitnasser/Downloads/Sortir Au Maroc - Official/client/components/pro/tabs/*.tsx)",
      "Bash(while read file)",
      "Bash(do wc -l \"/Users/salaheddineaitnasser/Downloads/Sortir Au Maroc - Official/client/components/pro/reservations/$file\")",
      "Bash(ANALYZE=true pnpm run build:client:*)",
      "Bash(du:*)",
      "Bash(pnpm run build:client:*)",
      "Bash(pnpm run build:client:smoke:*)",
      "Bash(pnpm run build:server:*)",
      "Bash(pnpm approve-builds:*)",
      "WebFetch(domain:sam.ma)",
      "Bash(zip:*)",
      "Bash(unzip:*)",
      "Bash(pnpm run dev)",
      "Bash(sips:*)",
      "Bash(supabase:*)",
      "WebFetch(domain:github.com)",
      "Bash(brew list:*)",
      "Bash(openssl rand:*)",
      "Bash(do if grep -q \"waitlist_entries\" \"$file\")",
      "Bash(fi)",
      "Bash(for f in /Users/salaheddineaitnasser/Downloads/Sortir Au Maroc - Official/server/migrations/*.sql)",
      "Bash(do grep -l \"pro_establishment_memberships\" \"$f\")",
      "Bash(pnpm typecheck:*)",
      "Bash(\"/Users/salaheddineaitnasser/Downloads/Sortir Au Maroc - Official/scripts/insert_faq.mjs\" << 'SCRIPT_EOF'\n// scripts/insert_faq.mjs\n// Insert 28 FAQ articles into faq_articles table via Supabase service role\n// Usage: node scripts/insert_faq.mjs\n\nimport { createClient } from \"@supabase/supabase-js\";\n\nconst SUPABASE_URL = \"https://ogjghzgzkxxoggocadln.supabase.co\";\nconst SERVICE_ROLE_KEY =\n  \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9namdoemd6a3h4b2dnb2NhZGxuIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2NjE3NTAyOCwiZXhwIjoyMDgxNzUxMDI4fQ.sniHdQ-EWw2ZdMj2gEjnrIvwLyinoLlVQ0aJL3-BNww\";\n\nconst supabase = createClient\\(SUPABASE_URL, SERVICE_ROLE_KEY\\);\n\nconst now = new Date\\(\\).toISOString\\(\\);\n\nconst articles = [\n  // =========================================================================\n  // CATEGORY: reservations\n  // =========================================================================\n  {\n    title: \"Comment faire une r\\\\u00e9servation ?\",\n    body: \"<p>Pour r\\\\u00e9server, recherchez un \\\\u00e9tablissement, choisissez un cr\\\\u00e9neau disponible, indiquez le nombre de personnes et confirmez.</p>\",\n    question_fr: \"Comment faire une r\\\\u00e9servation ?\",\n    question_en: \"How do I make a reservation?\",\n    answer_html_fr: \"<p>Pour r\\\\u00e9server sur sam.ma :</p><ol><li>Recherchez un \\\\u00e9tablissement \\(restaurant, h\\\\u00f4tel, spa, etc.\\)</li><li>Consultez les cr\\\\u00e9neaux disponibles sur la fiche</li><li>S\\\\u00e9lectionnez la date, l\\\\u2019heure et le nombre de personnes</li><li>Confirmez votre r\\\\u00e9servation</li></ol><p>Vous recevrez une confirmation par email et notification. Certains \\\\u00e9tablissements peuvent demander un acompte.</p>\",\n    answer_html_en: \"<p>To book on sam.ma:</p><ol><li>Search for an establishment \\(restaurant, hotel, spa, etc.\\)</li><li>Check available time slots on the listing page</li><li>Select the date, time and number of guests</li><li>Confirm your reservation</li></ol><p>You will receive a confirmation by email and notification. Some establishments may require a deposit.</p>\",\n    category: \"reservations\",\n    display_order: 1,\n    is_published: true,\n    tags: [\"booking\", \"how-to\", \"reservation\"],\n    created_at: now,\n    updated_at: now,\n  },\n  {\n    title: \"Qu\\\\u2019est-ce qu\\\\u2019un no-show et que se passe-t-il si je ne me pr\\\\u00e9sente pas ?\",\n    body: \"<p>Un no-show signifie que vous ne vous \\\\u00eates pas pr\\\\u00e9sent\\\\u00e9 \\\\u00e0 votre r\\\\u00e9servation sans l\\\\u2019annuler au pr\\\\u00e9alable.</p>\",\n    question_fr: \"Qu\\\\u2019est-ce qu\\\\u2019un no-show et que se passe-t-il si je ne me pr\\\\u00e9sente pas ?\",\n    question_en: \"What is a no-show and what happens if I don't show up?\",\n    answer_html_fr: \"<p>Un <strong>no-show</strong> signifie que vous ne vous \\\\u00eates pas pr\\\\u00e9sent\\\\u00e9 \\\\u00e0 votre r\\\\u00e9servation sans l\\\\u2019avoir annul\\\\u00e9e.</p><p><strong>Cons\\\\u00e9quences :</strong></p><ul><li>Votre score de fiabilit\\\\u00e9 diminue de <strong>-15 points</strong></li><li>Apr\\\\u00e8s <strong>3 no-shows cons\\\\u00e9cutifs</strong>, votre compte est suspendu 7 jours</li><li>Apr\\\\u00e8s <strong>5 no-shows cumul\\\\u00e9s</strong>, suspension de 30 jours</li></ul><p><strong>Vous pouvez contester :</strong> Si le professionnel d\\\\u00e9clare un no-show par erreur, vous avez <strong>48 heures</strong> pour contester en fournissant des preuves. Un arbitrage sera effectu\\\\u00e9 par l\\\\u2019\\\\u00e9quipe sam.ma.</p>\",\n    answer_html_en: \"<p>A <strong>no-show</strong> means you did not show up for your reservation without canceling it.</p><p><strong>Consequences:</strong></p><ul><li>Your reliability score decreases by <strong>-15 points</strong></li><li>After <strong>3 consecutive no-shows</strong>, your account is suspended for 7 days</li><li>After <strong>5 cumulative no-shows</strong>, 30-day suspension</li></ul><p><strong>You can dispute:</strong> If the professional declares a no-show by mistake, you have <strong>48 hours</strong> to dispute with evidence. Arbitration will be handled by the sam.ma team.</p>\",\n    category: \"reservations\",\n    display_order: 2,\n    is_published: true,\n    tags: [\"no-show\", \"dispute\", \"scoring\", \"suspension\"],\n    created_at: now,\n    updated_at: now,\n  },\n  {\n    title: \"Comment fonctionne le QR code de r\\\\u00e9servation ?\",\n    body: \"<p>Chaque r\\\\u00e9servation confirm\\\\u00e9e g\\\\u00e9n\\\\u00e8re un QR code unique pour le check-in sur place.</p>\",\n    question_fr: \"Comment fonctionne le QR code de r\\\\u00e9servation ?\",\n    question_en: \"How does the reservation QR code work?\",\n    answer_html_fr: \"<p>Chaque r\\\\u00e9servation confirm\\\\u00e9e g\\\\u00e9n\\\\u00e8re un <strong>QR code unique</strong> :</p><ul><li>Retrouvez-le dans <strong>\\\\u00ab Mes R\\\\u00e9servations \\\\u00bb</strong> \\\\u2192 d\\\\u00e9tail de la r\\\\u00e9servation</li><li>Pr\\\\u00e9sentez-le \\\\u00e0 l\\\\u2019\\\\u00e9tablissement \\\\u00e0 votre arriv\\\\u00e9e</li><li>Le professionnel scanne le code pour valider votre pr\\\\u00e9sence</li><li>Le check-in est instantan\\\\u00e9 et confirme votre venue</li></ul><p>Le QR code est \\\\u00e0 usage unique et ne peut pas \\\\u00eatre partag\\\\u00e9.</p>\",\n    answer_html_en: \"<p>Each confirmed reservation generates a <strong>unique QR code</strong>:</p><ul><li>Find it in <strong>\\\\\"My Reservations\\\\\"</strong> \\\\u2192 reservation details</li><li>Show it at the establishment upon arrival</li><li>The professional scans the code to validate your presence</li><li>Check-in is instant and confirms your attendance</li></ul><p>The QR code is single-use and cannot be shared.</p>\",\n    category: \"reservations\",\n    display_order: 3,\n    is_published: true,\n    tags: [\"qr-code\", \"check-in\", \"scan\"],\n    created_at: now,\n    updated_at: now,\n  },\n  {\n    title: \"Qu\\\\u2019est-ce que le score de fiabilit\\\\u00e9 ?\",\n    body: \"<p>Le score de fiabilit\\\\u00e9 \\\\u00e9value votre comportement en tant que client sur sam.ma.</p>\",\n    question_fr: \"Qu\\\\u2019est-ce que le score de fiabilit\\\\u00e9 ?\",\n    question_en: \"What is the reliability score?\",\n    answer_html_fr: \"<p>Le <strong>score de fiabilit\\\\u00e9</strong> \\(0-100\\) refl\\\\u00e8te votre comportement sur sam.ma :</p><ul><li><strong>Base :</strong> 60 points \\(tout nouveau compte\\)</li><li><strong>+5 pts</strong> par r\\\\u00e9servation honor\\\\u00e9e</li><li><strong>+2 pts</strong> si vous passez d\\\\u2019une r\\\\u00e9servation gratuite \\\\u00e0 payante</li><li><strong>+1 pt</strong> par avis d\\\\u00e9pos\\\\u00e9</li><li><strong>-5 \\\\u00e0 -10 pts</strong> par annulation tardive</li><li><strong>-15 pts</strong> par no-show</li></ul><p>Un score \\\\u00e9lev\\\\u00e9 vous donne acc\\\\u00e8s \\\\u00e0 plus de cr\\\\u00e9neaux et \\\\u00e0 des avantages exclusifs. Le score est affich\\\\u00e9 sous forme d\\\\u2019\\\\u00e9toiles \\(score \\\\u00f7 20\\).</p>\",\n    answer_html_en: \"<p>The <strong>reliability score</strong> \\(0-100\\) reflects your behavior on sam.ma:</p><ul><li><strong>Base:</strong> 60 points \\(every new account\\)</li><li><strong>+5 pts</strong> per honored reservation</li><li><strong>+2 pts</strong> if you upgrade from free to paid reservation</li><li><strong>+1 pt</strong> per review posted</li><li><strong>-5 to -10 pts</strong> per late cancellation</li><li><strong>-15 pts</strong> per no-show</li></ul><p>A high score gives you access to more time slots and exclusive benefits. The score is displayed as stars \\(score \\\\u00f7 20\\).</p>\",\n    category: \"reservations\",\n    display_order: 4,\n    is_published: true,\n    tags: [\"scoring\", \"reliability\", \"points\", \"stars\"],\n    created_at: now,\n    updated_at: now,\n  },\n  {\n    title: \"Puis-je passer d\\\\u2019une r\\\\u00e9servation gratuite \\\\u00e0 payante ?\",\n    body: \"<p>Oui, vous pouvez passer votre r\\\\u00e9servation gratuite en payante pour garantir votre cr\\\\u00e9neau avec priorit\\\\u00e9.</p>\",\n    question_fr: \"Puis-je passer d\\\\u2019une r\\\\u00e9servation gratuite \\\\u00e0 payante ?\",\n    question_en: \"Can I upgrade from a free to a paid reservation?\",\n    answer_html_fr: \"<p>Oui ! Si votre r\\\\u00e9servation est actuellement <strong>gratuite</strong>, vous pouvez la passer en <strong>r\\\\u00e9servation payante</strong> \\(avec acompte\\) :</p><ul><li>Allez dans <strong>\\\\u00ab Mes R\\\\u00e9servations \\\\u00bb</strong></li><li>Cliquez sur le bouton <strong>\\\\u00ab Passer en payant \\\\u00bb</strong></li><li>R\\\\u00e9glez l\\\\u2019acompte demand\\\\u00e9</li></ul><p><strong>Avantage :</strong> Vous gagnez <strong>+2 points</strong> de fiabilit\\\\u00e9 et votre cr\\\\u00e9neau est garanti avec priorit\\\\u00e9.</p>\",\n    answer_html_en: \"<p>Yes! If your reservation is currently <strong>free</strong>, you can upgrade it to a <strong>paid reservation</strong> \\(with deposit\\):</p><ul><li>Go to <strong>\\\\\"My Reservations\\\\\"</strong></li><li>Click the <strong>\\\\\"Upgrade to paid\\\\\"</strong> button</li><li>Pay the required deposit</li></ul><p><strong>Benefit:</strong> You earn <strong>+2 reliability points</strong> and your slot is guaranteed with priority.</p>\",\n    category: \"reservations\",\n    display_order: 5,\n    is_published: true,\n    tags: [\"upgrade\", \"free\", \"paid\", \"deposit\"],\n    created_at: now,\n    updated_at: now,\n  },\n  {\n    title: \"Je n\\\\u2019ai pas re\\\\u00e7u ma confirmation de r\\\\u00e9servation, que faire ?\",\n    body: \"<p>V\\\\u00e9rifiez votre dossier spam, consultez \\\\u00ab Mes R\\\\u00e9servations \\\\u00bb dans votre espace client, ou contactez le support.</p>\",\n    question_fr: \"Je n\\\\u2019ai pas re\\\\u00e7u ma confirmation de r\\\\u00e9servation, que faire ?\",\n    question_en: \"I didn't receive my reservation confirmation, what should I do?\",\n    answer_html_fr: \"<p>Si vous n\\\\u2019avez pas re\\\\u00e7u de confirmation :</p><ol><li>V\\\\u00e9rifiez votre dossier <strong>spam / courrier ind\\\\u00e9sirable</strong></li><li>Consultez <strong>\\\\u00ab Mes R\\\\u00e9servations \\\\u00bb</strong> dans votre espace client \\\\u2014 la r\\\\u00e9servation y est peut-\\\\u00eatre d\\\\u00e9j\\\\u00e0</li><li>V\\\\u00e9rifiez que votre adresse email est correcte dans votre profil</li><li>Si le probl\\\\u00e8me persiste, contactez-nous via le <strong>chat support</strong> ou cr\\\\u00e9ez un <strong>ticket</strong></li></ol>\",\n    answer_html_en: \"<p>If you didn't receive a confirmation:</p><ol><li>Check your <strong>spam / junk folder</strong></li><li>Check <strong>\\\\\"My Reservations\\\\\"</strong> in your account \\\\u2014 the booking may already be there</li><li>Verify your email address is correct in your profile</li><li>If the issue persists, contact us via <strong>support chat</strong> or create a <strong>ticket</strong></li></ol>\",\n    category: \"reservations\",\n    display_order: 6,\n    is_published: true,\n    tags: [\"confirmation\", \"email\", \"notification\"],\n    created_at: now,\n    updated_at: now,\n  },\n\n  // =========================================================================\n  // CATEGORY: annulations\n  // =========================================================================\n  {\n    title: \"Comment annuler une r\\\\u00e9servation ?\",\n    body: \"<p>Annulez depuis \\\\u00ab Mes R\\\\u00e9servations \\\\u00bb. L\\\\u2019annulation est gratuite si faite plus de 3 heures avant le cr\\\\u00e9neau.</p>\",\n    question_fr: \"Comment annuler une r\\\\u00e9servation ?\",\n    question_en: \"How do I cancel a reservation?\",\n    answer_html_fr: \"<p>Pour annuler une r\\\\u00e9servation :</p><ol><li>Allez dans <strong>\\\\u00ab Mes R\\\\u00e9servations \\\\u00bb</strong></li><li>S\\\\u00e9lectionnez la r\\\\u00e9servation \\\\u00e0 annuler</li><li>Cliquez sur <strong>\\\\u00ab Annuler \\\\u00bb</strong></li></ol><p><strong>Important :</strong></p><ul><li>L\\\\u2019annulation est <strong>gratuite</strong> si elle est faite plus de <strong>3 heures avant</strong> le cr\\\\u00e9neau</li><li>Une annulation tardive \\(moins de 3h\\) impacte votre <strong>score de fiabilit\\\\u00e9</strong> \\(-5 \\\\u00e0 -10 pts\\)</li><li>L\\\\u2019annulation d\\\\u2019une r\\\\u00e9servation avec acompte peut entra\\\\u00eener des frais selon la politique de l\\\\u2019\\\\u00e9tablissement</li></ul>\",\n    answer_html_en: \"<p>To cancel a reservation:</p><ol><li>Go to <strong>\\\\\"My Reservations\\\\\"</strong></li><li>Select the reservation to cancel</li><li>Click <strong>\\\\\"Cancel\\\\\"</strong></li></ol><p><strong>Important:</strong></p><ul><li>Cancellation is <strong>free</strong> if done more than <strong>3 hours before</strong> the time slot</li><li>A late cancellation \\(less than 3h\\) impacts your <strong>reliability score</strong> \\(-5 to -10 pts\\)</li><li>Canceling a reservation with deposit may incur fees depending on the establishment's policy</li></ul>\",\n    category: \"annulations\",\n    display_order: 1,\n    is_published: true,\n    tags: [\"cancel\", \"annulation\", \"policy\"],\n    created_at: now,\n    updated_at: now,\n  },\n  {\n    title: \"Qu\\\\u2019est-ce que la fen\\\\u00eatre de protection de 3 heures ?\",\n    body: \"<p>La fen\\\\u00eatre H-3 d\\\\u00e9termine les conditions d\\\\u2019annulation : gratuite au-del\\\\u00e0, avec p\\\\u00e9nalit\\\\u00e9 en de\\\\u00e7\\\\u00e0.</p>\",\n    question_fr: \"Qu\\\\u2019est-ce que la fen\\\\u00eatre de protection de 3 heures ?\",\n    question_en: \"What is the 3-hour protection window?\",\n    answer_html_fr: \"<p>La <strong>fen\\\\u00eatre de protection de 3 heures</strong> \\(H-3\\) fonctionne ainsi :</p><ul><li><strong>Plus de 3h avant :</strong> Annulation gratuite, sans impact sur votre score</li><li><strong>Moins de 3h avant :</strong> L\\\\u2019annulation est consid\\\\u00e9r\\\\u00e9e comme <strong>tardive</strong> et impacte votre score \\(-5 pts\\)</li><li><strong>Moins de 1h avant :</strong> Annulation <strong>tr\\\\u00e8s tardive</strong> \\(-10 pts\\)</li></ul><p>Les r\\\\u00e9servations gratuites faites moins de 3 heures avant le cr\\\\u00e9neau ne sont plus possibles pour prot\\\\u00e9ger les \\\\u00e9tablissements.</p>\",\n    answer_html_en: \"<p>The <strong>3-hour protection window</strong> \\(H-3\\) works as follows:</p><ul><li><strong>More than 3h before:</strong> Free cancellation, no impact on your score</li><li><strong>Less than 3h before:</strong> Cancellation is considered <strong>late</strong> and impacts your score \\(-5 pts\\)</li><li><strong>Less than 1h before:</strong> <strong>Very late</strong> cancellation \\(-10 pts\\)</li></ul><p>Free reservations made less than 3 hours before the time slot are no longer possible to protect establishments.</p>\",\n    category: \"annulations\",\n    display_order: 2,\n    is_published: true,\n    tags: [\"3-hours\", \"protection\", \"late-cancel\", \"scoring\"],\n    created_at: now,\n    updated_at: now,\n  },\n\n  // =========================================================================\n  // CATEGORY: paiements\n  // =========================================================================\n  {\n    title: \"Pourquoi un d\\\\u00e9p\\\\u00f4t \\(acompte\\) est demand\\\\u00e9 sur certaines r\\\\u00e9servations ?\",\n    body: \"<p>L\\\\u2019acompte est un m\\\\u00e9canisme de garantie d\\\\u00e9duit de l\\\\u2019addition finale lors de votre visite.</p>\",\n    question_fr: \"Pourquoi un d\\\\u00e9p\\\\u00f4t \\(acompte\\) est demand\\\\u00e9 sur certaines r\\\\u00e9servations ?\",\n    question_en: \"Why is a deposit required for some reservations?\",\n    answer_html_fr: \"<p>L\\\\u2019acompte est un m\\\\u00e9canisme de <strong>garantie</strong> :</p><ul><li>L\\\\u2019\\\\u00e9tablissement fixe le montant \\(souvent un pourcentage du menu\\)</li><li>Il est <strong>d\\\\u00e9duit de l\\\\u2019addition finale</strong> lors de votre visite</li><li>En cas de no-show, l\\\\u2019acompte peut \\\\u00eatre conserv\\\\u00e9 par l\\\\u2019\\\\u00e9tablissement</li><li>En cas d\\\\u2019annulation dans les d\\\\u00e9lais, l\\\\u2019acompte est rembours\\\\u00e9</li></ul><p>Le paiement est s\\\\u00e9curis\\\\u00e9 via <strong>LacaissePay</strong>, notre partenaire de paiement certifi\\\\u00e9.</p>\",\n    answer_html_en: \"<p>The deposit is a <strong>guarantee</strong> mechanism:</p><ul><li>The establishment sets the amount \\(often a percentage of the menu\\)</li><li>It is <strong>deducted from the final bill</strong> during your visit</li><li>In case of no-show, the deposit may be kept by the establishment</li><li>If canceled on time, the deposit is refunded</li></ul><p>Payment is secured via <strong>LacaissePay</strong>, our certified payment partner.</p>\",\n    category: \"paiements\",\n    display_order: 1,\n    is_published: true,\n    tags: [\"deposit\", \"acompte\", \"payment\", \"guarantee\"],\n    created_at: now,\n    updated_at: now,\n  },\n  {\n    title: \"Comment fonctionne la facturation pour les professionnels ?\",\n    body: \"<p>La facturation fonctionne par p\\\\u00e9riodes bimensuelles avec appel \\\\u00e0 facture et paiement automatis\\\\u00e9.</p>\",\n    question_fr: \"Comment fonctionne la facturation pour les professionnels ?\",\n    question_en: \"How does billing work for professionals?\",\n    answer_html_fr: \"<p>Le syst\\\\u00e8me de facturation sam.ma fonctionne par <strong>p\\\\u00e9riodes bimensuelles</strong> :</p><ol><li><strong>1er au 15</strong> et <strong>16 au dernier jour</strong> de chaque mois</li><li>\\\\u00c0 la cl\\\\u00f4ture de chaque p\\\\u00e9riode, un r\\\\u00e9capitulatif des commissions est g\\\\u00e9n\\\\u00e9r\\\\u00e9</li><li>Le professionnel soumet un <strong>appel \\\\u00e0 facture</strong> depuis son espace</li><li>L\\\\u2019\\\\u00e9quipe sam.ma valide la facture</li><li>Le virement est ex\\\\u00e9cut\\\\u00e9 dans les d\\\\u00e9lais convenus</li></ol><p>Les factures sont g\\\\u00e9n\\\\u00e9r\\\\u00e9es automatiquement via <strong>VosFactures</strong> et t\\\\u00e9l\\\\u00e9chargeables en PDF.</p>\",\n    answer_html_en: \"<p>The sam.ma billing system works in <strong>semi-monthly periods</strong>:</p><ol><li><strong>1st to 15th</strong> and <strong>16th to last day</strong> of each month</li><li>At the close of each period, a commission summary is generated</li><li>The professional submits an <strong>invoice request</strong> from their dashboard</li><li>The sam.ma team validates the invoice</li><li>Payment is executed within the agreed timeframe</li></ol><p>Invoices are automatically generated via <strong>VosFactures</strong> and downloadable as PDF.</p>\",\n    category: \"paiements\",\n    display_order: 2,\n    is_published: true,\n    tags: [\"billing\", \"facturation\", \"commission\", \"invoice\", \"pro\"],\n    created_at: now,\n    updated_at: now,\n  },\n  {\n    title: \"Quel est le taux de commission sur les r\\\\u00e9servations et les packs ?\",\n    body: \"<p>Le taux de commission par d\\\\u00e9faut est de 15% sur les r\\\\u00e9servations et les packs, avec possibilit\\\\u00e9 de n\\\\u00e9gociation.</p>\",\n    question_fr: \"Quel est le taux de commission sur les r\\\\u00e9servations et les packs ?\",\n    question_en: \"What is the commission rate on reservations and packs?\",\n    answer_html_fr: \"<p>Les taux de commission sam.ma :</p><ul><li><strong>R\\\\u00e9servations \\(acompte\\) :</strong> 15% par d\\\\u00e9faut</li><li><strong>Ventes de Packs :</strong> 15% par d\\\\u00e9faut</li><li><strong>Autres services :</strong> varient selon le type</li></ul><p>Des taux <strong>personnalis\\\\u00e9s</strong> peuvent \\\\u00eatre n\\\\u00e9goci\\\\u00e9s avec l\\\\u2019\\\\u00e9quipe commerciale sam.ma. Les commissions sont calcul\\\\u00e9es sur le montant HT et d\\\\u00e9taill\\\\u00e9es dans chaque facture.</p>\",\n    answer_html_en: \"<p>sam.ma commission rates:</p><ul><li><strong>Reservations \\(deposit\\):</strong> 15% by default</li><li><strong>Pack sales:</strong> 15% by default</li><li><strong>Other services:</strong> vary by type</li></ul><p><strong>Custom</strong> rates can be negotiated with the sam.ma sales team. Commissions are calculated on the pre-tax amount and detailed in each invoice.</p>\",\n    category: \"paiements\",\n    display_order: 3,\n    is_published: true,\n    tags: [\"commission\", \"rate\", \"percentage\", \"pro\"],\n    created_at: now,\n    updated_at: now,\n  },\n\n  // =========================================================================\n  // CATEGORY: comptes_utilisateurs\n  // =========================================================================\n  {\n    title: \"Comment cr\\\\u00e9er un compte et me connecter ?\",\n    body: \"<p>Cr\\\\u00e9ez un compte via email, Google ou Apple, puis confirmez votre adresse email pour acc\\\\u00e9der \\\\u00e0 toutes les fonctionnalit\\\\u00e9s.</p>\",\n    question_fr: \"Comment cr\\\\u00e9er un compte et me connecter ?\",\n    question_en: \"How do I create an account and log in?\",\n    answer_html_fr: \"<p>Pour cr\\\\u00e9er un compte :</p><ol><li>Cliquez sur <strong>\\\\u00ab Se connecter \\\\u00bb</strong> en haut de la page</li><li>Choisissez entre : <strong>Email + mot de passe</strong>, <strong>Google</strong>, ou <strong>Apple</strong></li><li>Confirmez votre adresse email \\(un lien de v\\\\u00e9rification vous sera envoy\\\\u00e9\\)</li></ol><p><strong>Important :</strong> La v\\\\u00e9rification email est n\\\\u00e9cessaire pour effectuer des r\\\\u00e9servations et acc\\\\u00e9der \\\\u00e0 toutes les fonctionnalit\\\\u00e9s.</p>\",\n    answer_html_en: \"<p>To create an account:</p><ol><li>Click <strong>\\\\\"Sign in\\\\\"</strong> at the top of the page</li><li>Choose between: <strong>Email + password</strong>, <strong>Google</strong>, or <strong>Apple</strong></li><li>Confirm your email address \\(a verification link will be sent\\)</li></ol><p><strong>Important:</strong> Email verification is required to make reservations and access all features.</p>\",\n    category: \"comptes_utilisateurs\",\n    display_order: 1,\n    is_published: true,\n    tags: [\"account\", \"login\", \"signup\", \"register\"],\n    created_at: now,\n    updated_at: now,\n  },\n  {\n    title: \"Comment laisser un avis sur un \\\\u00e9tablissement ?\",\n    body: \"<p>Apr\\\\u00e8s une r\\\\u00e9servation honor\\\\u00e9e, vous pouvez laisser un avis mod\\\\u00e9r\\\\u00e9 qui vous rapporte +1 point de fiabilit\\\\u00e9.</p>\",\n    question_fr: \"Comment laisser un avis sur un \\\\u00e9tablissement ?\",\n    question_en: \"How do I leave a review for an establishment?\",\n    answer_html_fr: \"<p>Pour laisser un avis :</p><ol><li>Vous devez avoir une <strong>r\\\\u00e9servation honor\\\\u00e9e</strong> \\(check-in effectu\\\\u00e9\\)</li><li>Apr\\\\u00e8s votre visite, vous recevrez une <strong>invitation \\\\u00e0 donner votre avis</strong></li><li>Vous pouvez aussi aller dans <strong>\\\\u00ab Mes R\\\\u00e9servations \\\\u00bb</strong> \\\\u2192 r\\\\u00e9servations pass\\\\u00e9es \\\\u2192 <strong>\\\\u00ab Donner un avis \\\\u00bb</strong></li><li>Notez l\\\\u2019\\\\u00e9tablissement et r\\\\u00e9digez votre commentaire</li></ol><p>Les avis sont <strong>mod\\\\u00e9r\\\\u00e9s</strong> par l\\\\u2019\\\\u00e9quipe sam.ma avant publication. Laisser un avis vous rapporte <strong>+1 point</strong> de fiabilit\\\\u00e9.</p>\",\n    answer_html_en: \"<p>To leave a review:</p><ol><li>You must have an <strong>honored reservation</strong> \\(check-in completed\\)</li><li>After your visit, you'll receive a <strong>review invitation</strong></li><li>You can also go to <strong>\\\\\"My Reservations\\\\\"</strong> \\\\u2192 past reservations \\\\u2192 <strong>\\\\\"Leave a review\\\\\"</strong></li><li>Rate the establishment and write your comment</li></ol><p>Reviews are <strong>moderated</strong> by the sam.ma team before publication. Leaving a review earns you <strong>+1 reliability point</strong>.</p>\",\n    category: \"comptes_utilisateurs\",\n    display_order: 2,\n    is_published: true,\n    tags: [\"review\", \"avis\", \"rating\", \"moderation\"],\n    created_at: now,\n    updated_at: now,\n  },\n  {\n    title: \"Comment utiliser Sam, l\\\\u2019assistant IA ?\",\n    body: \"<p>Sam est le premier concierge IA de r\\\\u00e9servation au Maroc, disponible en fran\\\\u00e7ais, anglais et darija.</p>\",\n    question_fr: \"Comment utiliser Sam, l\\\\u2019assistant IA ?\",\n    question_en: \"How do I use Sam, the AI assistant?\",\n    answer_html_fr: \"<p><strong>Sam</strong> est le premier concierge IA de r\\\\u00e9servation au Maroc :</p><ul><li>Cliquez sur le <strong>bouton flottant</strong> en bas \\\\u00e0 droite de l\\\\u2019\\\\u00e9cran</li><li>S\\\\u00e9lectionnez <strong>\\\\u00ab Sam AI \\\\u00bb</strong></li><li>Posez votre question en <strong>fran\\\\u00e7ais, anglais ou darija</strong></li></ul><p><strong>Sam peut :</strong></p><ul><li>Chercher des restaurants, h\\\\u00f4tels, spas, activit\\\\u00e9s...</li><li>Consulter les menus, horaires, adresses et avis</li><li>V\\\\u00e9rifier la disponibilit\\\\u00e9 en temps r\\\\u00e9el</li><li>Vous guider dans la r\\\\u00e9servation</li><li>Vous surprendre avec des recommandations personnalis\\\\u00e9es</li></ul><p>Sam utilise uniquement les donn\\\\u00e9es de sam.ma et ne recommande que des \\\\u00e9tablissements v\\\\u00e9rifi\\\\u00e9s.</p>\",\n    answer_html_en: \"<p><strong>Sam</strong> is Morocco's first AI booking concierge:</p><ul><li>Click the <strong>floating button</strong> at the bottom right of the screen</li><li>Select <strong>\\\\\"Sam AI\\\\\"</strong></li><li>Ask your question in <strong>French, English, or Darija</strong></li></ul><p><strong>Sam can:</strong></p><ul><li>Search for restaurants, hotels, spas, activities...</li><li>Check menus, hours, addresses, and reviews</li><li>Verify real-time availability</li><li>Guide you through the booking process</li><li>Surprise you with personalized recommendations</li></ul><p>Sam only uses sam.ma data and only recommends verified establishments.</p>\",\n    category: \"comptes_utilisateurs\",\n    display_order: 3,\n    is_published: true,\n    tags: [\"sam\", \"ai\", \"assistant\", \"concierge\", \"chatbot\"],\n    created_at: now,\n    updated_at: now,\n  },\n\n  // =========================================================================\n  // CATEGORY: comptes_pro\n  // =========================================================================\n  {\n    title: \"Je suis un \\\\u00e9tablissement : comment cr\\\\u00e9er un compte PRO ?\",\n    body: \"<p>Rendez-vous sur sam.ma/pro pour cr\\\\u00e9er votre compte professionnel, v\\\\u00e9rifi\\\\u00e9 sous 24-48h.</p>\",\n    question_fr: \"Je suis un \\\\u00e9tablissement : comment cr\\\\u00e9er un compte PRO ?\",\n    question_en: \"I'm an establishment: how do I create a PRO account?\",\n    answer_html_fr: \"<p>Pour cr\\\\u00e9er un compte PRO :</p><ol><li>Rendez-vous sur <strong>sam.ma/pro</strong></li><li>Cliquez sur <strong>\\\\u00ab Cr\\\\u00e9er un compte professionnel \\\\u00bb</strong></li><li>Renseignez les informations de votre \\\\u00e9tablissement</li><li>Votre compte sera v\\\\u00e9rifi\\\\u00e9 par notre \\\\u00e9quipe sous 24-48h</li></ol><p>Une fois valid\\\\u00e9, vous aurez acc\\\\u00e8s \\\\u00e0 votre <strong>tableau de bord</strong> complet : r\\\\u00e9servations, menu digital, avis, statistiques, messagerie, et plus.</p>\",\n    answer_html_en: \"<p>To create a PRO account:</p><ol><li>Go to <strong>sam.ma/pro</strong></li><li>Click <strong>\\\\\"Create a professional account\\\\\"</strong></li><li>Fill in your establishment information</li><li>Your account will be verified by our team within 24-48h</li></ol><p>Once validated, you'll have access to your full <strong>dashboard</strong>: reservations, digital menu, reviews, statistics, messaging, and more.</p>\",\n    category: \"comptes_pro\",\n    display_order: 1,\n    is_published: true,\n    tags: [\"pro\", \"account\", \"create\", \"establishment\"],\n    created_at: now,\n    updated_at: now,\n  },\n  {\n    title: \"Comment fonctionne la messagerie avec les clients ?\",\n    body: \"<p>La messagerie pro permet de communiquer en temps r\\\\u00e9el avec vos clients, avec pi\\\\u00e8ces jointes et r\\\\u00e9ponses automatiques.</p>\",\n    question_fr: \"Comment fonctionne la messagerie avec les clients ?\",\n    question_en: \"How does messaging with clients work?\",\n    answer_html_fr: \"<p>La <strong>messagerie pro</strong> \\(onglet \\\\u00ab Messages \\\\u00bb\\) vous permet de :</p><ul><li>Voir toutes les <strong>conversations li\\\\u00e9es \\\\u00e0 vos r\\\\u00e9servations</strong></li><li>R\\\\u00e9pondre aux messages des clients en <strong>temps r\\\\u00e9el</strong></li><li>Envoyer des <strong>pi\\\\u00e8ces jointes</strong> \\(images, PDF\\)</li><li>Configurer des <strong>r\\\\u00e9ponses automatiques</strong> \\(horaires, vacances\\)</li><li>Marquer les conversations comme lues/non lues</li></ul><p><strong>R\\\\u00e9ponses automatiques :</strong> Allez dans Param\\\\u00e8tres \\\\u2192 R\\\\u00e9ponses auto pour configurer un message automatique en dehors de vos heures de disponibilit\\\\u00e9 ou pendant vos cong\\\\u00e9s.</p>\",\n    answer_html_en: \"<p>The <strong>pro messaging</strong> \\(\\\\\"Messages\\\\\" tab\\) allows you to:</p><ul><li>See all <strong>conversations linked to your reservations</strong></li><li>Reply to client messages in <strong>real-time</strong></li><li>Send <strong>attachments</strong> \\(images, PDF\\)</li><li>Set up <strong>auto-replies</strong> \\(schedule, vacation mode\\)</li><li>Mark conversations as read/unread</li></ul><p><strong>Auto-replies:</strong> Go to Settings \\\\u2192 Auto-replies to configure an automatic message outside your availability hours or during your holidays.</p>\",\n    category: \"comptes_pro\",\n    display_order: 2,\n    is_published: true,\n    tags: [\"messaging\", \"chat\", \"auto-reply\", \"communication\"],\n    created_at: now,\n    updated_at: now,\n  },\n  {\n    title: \"Comment g\\\\u00e9rer les r\\\\u00f4les et permissions de mon \\\\u00e9quipe ?\",\n    body: \"<p>Le syst\\\\u00e8me de permissions par r\\\\u00f4le permet au propri\\\\u00e9taire de personnaliser les acc\\\\u00e8s de chaque membre de l\\\\u2019\\\\u00e9quipe.</p>\",\n    question_fr: \"Comment g\\\\u00e9rer les r\\\\u00f4les et permissions de mon \\\\u00e9quipe ?\",\n    question_en: \"How do I manage my team's roles and permissions?\",\n    answer_html_fr: \"<p>Le syst\\\\u00e8me de <strong>permissions par r\\\\u00f4le</strong> \\(onglet \\\\u00ab \\\\u00c9quipe \\\\u00bb\\) :</p><p><strong>5 r\\\\u00f4les disponibles :</strong></p><ul><li><strong>Propri\\\\u00e9taire :</strong> tous les acc\\\\u00e8s \\(non modifiable\\)</li><li><strong>Manager :</strong> gestion compl\\\\u00e8te sauf \\\\u00e9quipe</li><li><strong>R\\\\u00e9ception :</strong> r\\\\u00e9servations et scanner QR</li><li><strong>Comptabilit\\\\u00e9 :</strong> facturation et finances</li><li><strong>Marketing :</strong> offres, packs et visibilit\\\\u00e9</li></ul><p><strong>6 cat\\\\u00e9gories de permissions :</strong> profil, \\\\u00e9quipe \\(propri\\\\u00e9taire uniquement\\), r\\\\u00e9servations, facturation, inventaire, offres.</p><p>Le propri\\\\u00e9taire peut <strong>personnaliser</strong> les permissions de chaque r\\\\u00f4le depuis la matrice de permissions dans l\\\\u2019onglet \\\\u00c9quipe.</p>\",\n    answer_html_en: \"<p>The <strong>role-based permissions</strong> system \\(\\\\\"Team\\\\\" tab\\):</p><p><strong>5 available roles:</strong></p><ul><li><strong>Owner:</strong> full access \\(not modifiable\\)</li><li><strong>Manager:</strong> full management except team</li><li><strong>Reception:</strong> reservations and QR scanner</li><li><strong>Accounting:</strong> billing and finances</li><li><strong>Marketing:</strong> offers, packs and visibility</li></ul><p><strong>6 permission categories:</strong> profile, team \\(owner only\\), reservations, billing, inventory, offers.</p><p>The owner can <strong>customize</strong> permissions for each role from the permissions matrix in the Team tab.</p>\",\n    category: \"comptes_pro\",\n    display_order: 3,\n    is_published: true,\n    tags: [\"team\", \"roles\", \"permissions\", \"owner\", \"manager\"],\n    created_at: now,\n    updated_at: now,\n  },\n  {\n    title: \"Comment utiliser le scanner QR pour valider les r\\\\u00e9servations ?\",\n    body: \"<p>Le scanner QR de l\\\\u2019espace pro permet de valider instantan\\\\u00e9ment la pr\\\\u00e9sence d\\\\u2019un client \\\\u00e0 sa r\\\\u00e9servation.</p>\",\n    question_fr: \"Comment utiliser le scanner QR pour valider les r\\\\u00e9servations ?\",\n    question_en: \"How do I use the QR scanner to validate reservations?\",\n    answer_html_fr: \"<p>Pour valider une r\\\\u00e9servation par QR code :</p><ol><li>Allez dans l\\\\u2019onglet <strong>\\\\u00ab Scanner QR \\\\u00bb</strong> de votre espace pro</li><li>Autorisez l\\\\u2019acc\\\\u00e8s \\\\u00e0 la <strong>cam\\\\u00e9ra</strong> de votre appareil</li><li>Scannez le <strong>QR code</strong> pr\\\\u00e9sent\\\\u00e9 par le client</li><li>La r\\\\u00e9servation est automatiquement valid\\\\u00e9e \\(<strong>check-in</strong>\\)</li></ol><p>Le scan d\\\\u00e9clenche automatiquement :</p><ul><li>La confirmation de pr\\\\u00e9sence du client</li><li>La mise \\\\u00e0 jour du statut de la r\\\\u00e9servation</li><li>Le calcul des points de fiabilit\\\\u00e9 du client \\(+5 pts\\)</li></ul>\",\n    answer_html_en: \"<p>To validate a reservation via QR code:</p><ol><li>Go to the <strong>\\\\\"QR Scanner\\\\\"</strong> tab in your pro dashboard</li><li>Allow <strong>camera</strong> access on your device</li><li>Scan the <strong>QR code</strong> presented by the client</li><li>The reservation is automatically validated \\(<strong>check-in</strong>\\)</li></ol><p>Scanning automatically triggers:</p><ul><li>Client presence confirmation</li><li>Reservation status update</li><li>Client reliability points calculation \\(+5 pts\\)</li></ul>\",\n    category: \"comptes_pro\",\n    display_order: 4,\n    is_published: true,\n    tags: [\"qr\", \"scanner\", \"check-in\", \"validation\"],\n    created_at: now,\n    updated_at: now,\n  },\n  {\n    title: \"Comment g\\\\u00e9rer mes capacit\\\\u00e9s et cr\\\\u00e9neaux ?\",\n    body: \"<p>Configurez vos places, horaires et remises par cr\\\\u00e9neau depuis l\\\\u2019onglet R\\\\u00e9servations de votre espace pro.</p>\",\n    question_fr: \"Comment g\\\\u00e9rer mes capacit\\\\u00e9s et cr\\\\u00e9neaux ?\",\n    question_en: \"How do I manage my capacity and time slots?\",\n    answer_html_fr: \"<p>Dans l\\\\u2019onglet <strong>\\\\u00ab R\\\\u00e9servations \\\\u00bb</strong> \\\\u2192 <strong>\\\\u00ab Capacit\\\\u00e9 \\\\u00bb</strong> :</p><ul><li>D\\\\u00e9finissez le <strong>nombre de places total</strong> par cr\\\\u00e9neau</li><li>Configurez les <strong>horaires d\\\\u2019ouverture</strong> par jour</li><li>Cr\\\\u00e9ez des <strong>cr\\\\u00e9neaux sp\\\\u00e9ciaux</strong> \\(brunch du dimanche, soir\\\\u00e9es th\\\\u00e9matiques\\)</li><li>Activez les <strong>remises sur cr\\\\u00e9neau</strong> pour les heures creuses</li></ul><p>Le syst\\\\u00e8me g\\\\u00e8re automatiquement un <strong>buffer</strong> entre r\\\\u00e9servations gratuites et payantes pour optimiser votre taux de remplissage.</p>\",\n    answer_html_en: \"<p>In the <strong>\\\\\"Reservations\\\\\"</strong> tab \\\\u2192 <strong>\\\\\"Capacity\\\\\"</strong>:</p><ul><li>Set the <strong>total number of seats</strong> per time slot</li><li>Configure <strong>opening hours</strong> by day</li><li>Create <strong>special slots</strong> \\(Sunday brunch, themed evenings\\)</li><li>Enable <strong>slot discounts</strong> for off-peak hours</li></ul><p>The system automatically manages a <strong>buffer</strong> between free and paid reservations to optimize your occupancy rate.</p>\",\n    category: \"comptes_pro\",\n    display_order: 5,\n    is_published: true,\n    tags: [\"capacity\", \"slots\", \"availability\", \"schedule\"],\n    created_at: now,\n    updated_at: now,\n  },\n  {\n    title: \"Comment cr\\\\u00e9er et g\\\\u00e9rer des Packs en tant que professionnel ?\",\n    body: \"<p>Cr\\\\u00e9ez des packs depuis votre espace pro, soumettez-les \\\\u00e0 la mod\\\\u00e9ration, puis g\\\\u00e9rez ventes et consommations.</p>\",\n    question_fr: \"Comment cr\\\\u00e9er et g\\\\u00e9rer des Packs en tant que professionnel ?\",\n    question_en: \"How do I create and manage Packs as a professional?\",\n    answer_html_fr: \"<p>Pour cr\\\\u00e9er un Pack depuis votre espace pro :</p><ol><li>Allez dans <strong>\\\\u00ab Packs & Promotions \\\\u00bb</strong></li><li>Cliquez sur <strong>\\\\u00ab Nouveau Pack \\\\u00bb</strong></li><li>Renseignez : titre, description, prix, r\\\\u00e9duction, photos, conditions</li><li>Configurez : stock disponible, dates de validit\\\\u00e9, jours/horaires valides</li><li>Soumettez le pack pour <strong>mod\\\\u00e9ration</strong></li></ol><p>Apr\\\\u00e8s validation par l\\\\u2019\\\\u00e9quipe sam.ma, votre pack sera publi\\\\u00e9. Vous pouvez ensuite :</p><ul><li><strong>Suspendre/reprendre</strong> les ventes temporairement</li><li><strong>Dupliquer</strong> un pack existant pour en cr\\\\u00e9er un nouveau</li><li><strong>Consulter les statistiques</strong> de ventes</li><li><strong>Scanner les QR codes</strong> des clients pour valider l\\\\u2019utilisation</li></ul>\",\n    answer_html_en: \"<p>To create a Pack from your pro dashboard:</p><ol><li>Go to <strong>\\\\\"Packs & Promotions\\\\\"</strong></li><li>Click <strong>\\\\\"New Pack\\\\\"</strong></li><li>Fill in: title, description, price, discount, photos, conditions</li><li>Configure: available stock, validity dates, valid days/hours</li><li>Submit the pack for <strong>moderation</strong></li></ol><p>After validation by the sam.ma team, your pack will be published. You can then:</p><ul><li><strong>Suspend/resume</strong> sales temporarily</li><li><strong>Duplicate</strong> an existing pack to create a new one</li><li><strong>Check sales statistics</strong></li><li><strong>Scan QR codes</strong> from clients to validate usage</li></ul>\",\n    category: \"comptes_pro\",\n    display_order: 6,\n    is_published: true,\n    tags: [\"packs\", \"create\", \"manage\", \"pro\", \"moderation\"],\n    created_at: now,\n    updated_at: now,\n  },\n  {\n    title: \"Comment contester une facture de commission ?\",\n    body: \"<p>Contestez une facture depuis Finances \\\\u2192 P\\\\u00e9riodes. L\\\\u2019\\\\u00e9quipe sam.ma examine sous 5 jours avec possibilit\\\\u00e9 d\\\\u2019escalade.</p>\",\n    question_fr: \"Comment contester une facture de commission ?\",\n    question_en: \"How do I dispute a commission invoice?\",\n    answer_html_fr: \"<p>Pour contester une facture de commission :</p><ol><li>Allez dans <strong>\\\\u00ab Finances \\\\u00bb</strong> \\\\u2192 <strong>\\\\u00ab P\\\\u00e9riodes \\\\u00bb</strong></li><li>S\\\\u00e9lectionnez la p\\\\u00e9riode concern\\\\u00e9e</li><li>Cliquez sur <strong>\\\\u00ab Contester \\\\u00bb</strong></li><li>D\\\\u00e9crivez le motif de votre contestation</li></ol><p><strong>Processus :</strong></p><ul><li>L\\\\u2019\\\\u00e9quipe sam.ma examine votre contestation sous <strong>5 jours</strong></li><li>Si accept\\\\u00e9e : un avoir est g\\\\u00e9n\\\\u00e9r\\\\u00e9 et le montant corrig\\\\u00e9</li><li>Si rejet\\\\u00e9e : vous pouvez <strong>escalader</strong> la contestation pour un second examen</li></ul>\",\n    answer_html_en: \"<p>To dispute a commission invoice:</p><ol><li>Go to <strong>\\\\\"Finances\\\\\"</strong> \\\\u2192 <strong>\\\\\"Periods\\\\\"</strong></li><li>Select the concerned period</li><li>Click <strong>\\\\\"Dispute\\\\\"</strong></li><li>Describe the reason for your dispute</li></ol><p><strong>Process:</strong></p><ul><li>The sam.ma team reviews your dispute within <strong>5 days</strong></li><li>If accepted: a credit note is generated and the amount corrected</li><li>If rejected: you can <strong>escalate</strong> the dispute for a second review</li></ul>\",\n    category: \"comptes_pro\",\n    display_order: 7,\n    is_published: true,\n    tags: [\"dispute\", \"invoice\", \"billing\", \"contest\", \"commission\"],\n    created_at: now,\n    updated_at: now,\n  },\n\n  // =========================================================================\n  // CATEGORY: packs_offres\n  // =========================================================================\n  {\n    title: \"\\\\u00c0 quoi servent les packs et offres ?\",\n    body: \"<p>Les Packs sont des offres sp\\\\u00e9ciales des \\\\u00e9tablissements avec r\\\\u00e9ductions, multi-usage et stock limit\\\\u00e9.</p>\",\n    question_fr: \"\\\\u00c0 quoi servent les packs et offres ?\",\n    question_en: \"What are packs and offers for?\",\n    answer_html_fr: \"<p>Les <strong>Packs</strong> sont des offres sp\\\\u00e9ciales cr\\\\u00e9\\\\u00e9es par les \\\\u00e9tablissements :</p><ul><li><strong>R\\\\u00e9ductions</strong> sur des menus, soins, activit\\\\u00e9s</li><li><strong>Multi-usage</strong> : certains packs permettent plusieurs utilisations \\(ex: 5 entr\\\\u00e9es spa\\)</li><li><strong>Dur\\\\u00e9e limit\\\\u00e9e</strong> : les packs ont des dates de validit\\\\u00e9</li><li><strong>Stock limit\\\\u00e9</strong> : nombre de places disponibles affich\\\\u00e9</li></ul><p>Chaque pack achet\\\\u00e9 g\\\\u00e9n\\\\u00e8re un <strong>QR code</strong> que vous pr\\\\u00e9sentez \\\\u00e0 l\\\\u2019\\\\u00e9tablissement pour utilisation.</p>\",\n    answer_html_en: \"<p><strong>Packs</strong> are special offers created by establishments:</p><ul><li><strong>Discounts</strong> on menus, treatments, activities</li><li><strong>Multi-use</strong>: some packs allow multiple uses \\(e.g., 5 spa entries\\)</li><li><strong>Limited time</strong>: packs have validity dates</li><li><strong>Limited stock</strong>: number of available spots displayed</li></ul><p>Each purchased pack generates a <strong>QR code</strong> that you present at the establishment for use.</p>\",\n    category: \"packs_offres\",\n    display_order: 1,\n    is_published: true,\n    tags: [\"packs\", \"offers\", \"deals\", \"promotions\"],\n    created_at: now,\n    updated_at: now,\n  },\n  {\n    title: \"Comment acheter et utiliser un Pack ?\",\n    body: \"<p>Achetez un pack depuis la page /packs ou la fiche d\\\\u2019un \\\\u00e9tablissement, puis pr\\\\u00e9sentez le QR code pour l\\\\u2019utiliser.</p>\",\n    question_fr: \"Comment acheter et utiliser un Pack ?\",\n    question_en: \"How do I buy and use a Pack?\",\n    answer_html_fr: \"<p><strong>Acheter un Pack :</strong></p><ol><li>Parcourez les packs sur la page <strong>/packs</strong> ou sur la fiche d\\\\u2019un \\\\u00e9tablissement</li><li>S\\\\u00e9lectionnez le pack souhait\\\\u00e9</li><li>Appliquez un <strong>code promo</strong> si vous en avez un</li><li>Proc\\\\u00e9dez au paiement</li></ol><p><strong>Utiliser un Pack :</strong></p><ol><li>Allez dans <strong>\\\\u00ab Mes Packs \\\\u00bb</strong> dans votre profil</li><li>Pr\\\\u00e9sentez le <strong>QR code</strong> \\\\u00e0 l\\\\u2019\\\\u00e9tablissement</li><li>Le professionnel scanne le code pour valider l\\\\u2019utilisation</li><li>Pour les packs multi-usage, le compteur d\\\\u2019utilisations se met \\\\u00e0 jour automatiquement</li></ol>\",\n    answer_html_en: \"<p><strong>Buying a Pack:</strong></p><ol><li>Browse packs on the <strong>/packs</strong> page or on an establishment's listing</li><li>Select the desired pack</li><li>Apply a <strong>promo code</strong> if you have one</li><li>Proceed to payment</li></ol><p><strong>Using a Pack:</strong></p><ol><li>Go to <strong>\\\\\"My Packs\\\\\"</strong> in your profile</li><li>Show the <strong>QR code</strong> at the establishment</li><li>The professional scans the code to validate usage</li><li>For multi-use packs, the usage counter updates automatically</li></ol>\",\n    category: \"packs_offres\",\n    display_order: 2,\n    is_published: true,\n    tags: [\"buy\", \"purchase\", \"use\", \"qr-code\", \"scan\"],\n    created_at: now,\n    updated_at: now,\n  },\n  {\n    title: \"Comment obtenir un remboursement sur un Pack ?\",\n    body: \"<p>Demandez un remboursement depuis \\\\u00ab Mes Packs \\\\u00bb. Les conditions varient selon le d\\\\u00e9lai avant expiration.</p>\",\n    question_fr: \"Comment obtenir un remboursement sur un Pack ?\",\n    question_en: \"How do I get a refund on a Pack?\",\n    answer_html_fr: \"<p>La politique de remboursement des Packs :</p><ul><li><strong>Plus de 14 jours avant expiration :</strong> Remboursement int\\\\u00e9gral</li><li><strong>Moins de 14 jours + cr\\\\u00e9dit pr\\\\u00e9f\\\\u00e9r\\\\u00e9 :</strong> 100% en cr\\\\u00e9dit sam.ma</li><li><strong>Moins de 14 jours :</strong> Remboursement \\\\u00e0 50%</li><li><strong>Pack expir\\\\u00e9 ou enti\\\\u00e8rement consomm\\\\u00e9 :</strong> Pas de remboursement</li></ul><p>Pour demander un remboursement :</p><ol><li>Allez dans <strong>\\\\u00ab Mes Packs \\\\u00bb</strong></li><li>S\\\\u00e9lectionnez le pack concern\\\\u00e9</li><li>Cliquez sur <strong>\\\\u00ab Demander un remboursement \\\\u00bb</strong></li></ol>\",\n    answer_html_en: \"<p>Pack refund policy:</p><ul><li><strong>More than 14 days before expiry:</strong> Full refund</li><li><strong>Less than 14 days + credit preferred:</strong> 100% as sam.ma credit</li><li><strong>Less than 14 days:</strong> 50% refund</li><li><strong>Expired or fully consumed pack:</strong> No refund</li></ul><p>To request a refund:</p><ol><li>Go to <strong>\\\\\"My Packs\\\\\"</strong></li><li>Select the concerned pack</li><li>Click <strong>\\\\\"Request a refund\\\\\"</strong></li></ol>\",\n    category: \"packs_offres\",\n    display_order: 3,\n    is_published: true,\n    tags: [\"refund\", \"remboursement\", \"policy\", \"credit\"],\n    created_at: now,\n    updated_at: now,\n  },\n  {\n    title: \"Comment utiliser un code promo ?\",\n    body: \"<p>Lors de l\\\\u2019achat d\\\\u2019un Pack, cliquez sur \\\\u00ab J\\\\u2019ai un code promo \\\\u00bb, saisissez-le et la r\\\\u00e9duction s\\\\u2019applique imm\\\\u00e9diatement.</p>\",\n    question_fr: \"Comment utiliser un code promo ?\",\n    question_en: \"How do I use a promo code?\",\n    answer_html_fr: \"<p>Pour utiliser un code promo :</p><ol><li>Lors de l\\\\u2019achat d\\\\u2019un <strong>Pack</strong>, cliquez sur <strong>\\\\u00ab J\\\\u2019ai un code promo \\\\u00bb</strong></li><li>Saisissez votre code et cliquez sur <strong>\\\\u00ab Appliquer \\\\u00bb</strong></li><li>La r\\\\u00e9duction s\\\\u2019affiche imm\\\\u00e9diatement sur le prix</li></ol><p><strong>Types de codes promo :</strong></p><ul><li><strong>Codes \\\\u00e9tablissement :</strong> cr\\\\u00e9\\\\u00e9s par les professionnels pour leurs packs</li><li><strong>Codes plateforme :</strong> cr\\\\u00e9\\\\u00e9s par sam.ma pour des op\\\\u00e9rations sp\\\\u00e9ciales</li></ul><p>Certains codes sont limit\\\\u00e9s \\(premier achat, date de validit\\\\u00e9, nombre d\\\\u2019utilisations max\\).</p>\",\n    answer_html_en: \"<p>To use a promo code:</p><ol><li>When buying a <strong>Pack</strong>, click <strong>\\\\\"I have a promo code\\\\\"</strong></li><li>Enter your code and click <strong>\\\\\"Apply\\\\\"</strong></li><li>The discount is immediately shown on the price</li></ol><p><strong>Types of promo codes:</strong></p><ul><li><strong>Establishment codes:</strong> created by professionals for their packs</li><li><strong>Platform codes:</strong> created by sam.ma for special operations</li></ul><p>Some codes are limited \\(first purchase, validity date, max usage count\\).</p>\",\n    category: \"packs_offres\",\n    display_order: 4,\n    is_published: true,\n    tags: [\"promo\", \"code\", \"discount\", \"coupon\"],\n    created_at: now,\n    updated_at: now,\n  },\n\n  // =========================================================================\n  // CATEGORY: support_general\n  // =========================================================================\n  {\n    title: \"Comment contacter le support ?\",\n    body: \"<p>Contactez-nous via le chat en direct, les tickets support ou par email \\\\u00e0 support@sortiraumaroc.com.</p>\",\n    question_fr: \"Comment contacter le support ?\",\n    question_en: \"How do I contact support?\",\n    answer_html_fr: \"<p>Plusieurs moyens de nous contacter :</p><ul><li><strong>Chat en direct :</strong> Disponible de 9h \\\\u00e0 19h dans l\\\\u2019onglet Assistance. Cliquez sur le champ de chat et \\\\u00e9crivez votre message.</li><li><strong>Tickets support :</strong> Cr\\\\u00e9ez un ticket pour les demandes complexes. Vous recevrez une r\\\\u00e9ponse sous 24h \\(2h pour les urgences\\).</li><li><strong>Email :</strong> support@sortiraumaroc.com</li></ul><p>Pour les professionnels, le support est accessible directement depuis votre <strong>espace pro \\\\u2192 Assistance</strong>.</p>\",\n    answer_html_en: \"<p>Several ways to contact us:</p><ul><li><strong>Live chat:</strong> Available 9am-7pm in the Assistance tab. Click the chat field and type your message.</li><li><strong>Support tickets:</strong> Create a ticket for complex requests. You'll receive a response within 24h \\(2h for urgent issues\\).</li><li><strong>Email:</strong> support@sortiraumaroc.com</li></ul><p>For professionals, support is accessible directly from your <strong>pro dashboard \\\\u2192 Assistance</strong>.</p>\",\n    category: \"support_general\",\n    display_order: 1,\n    is_published: true,\n    tags: [\"contact\", \"support\", \"help\", \"chat\", \"ticket\"],\n    created_at: now,\n    updated_at: now,\n  },\n  {\n    title: \"Comment fonctionne le programme de fid\\\\u00e9lit\\\\u00e9 ?\",\n    body: \"<p>Le programme de fid\\\\u00e9lit\\\\u00e9 vous r\\\\u00e9compense avec des points \\\\u00e0 chaque activit\\\\u00e9, avec 4 niveaux d\\\\u2019avantages.</p>\",\n    question_fr: \"Comment fonctionne le programme de fid\\\\u00e9lit\\\\u00e9 ?\",\n    question_en: \"How does the loyalty program work?\",\n    answer_html_fr: \"<p>Le <strong>programme de fid\\\\u00e9lit\\\\u00e9</strong> sam.ma vous r\\\\u00e9compense pour votre activit\\\\u00e9 :</p><ul><li><strong>Gagnez des points</strong> \\\\u00e0 chaque r\\\\u00e9servation honor\\\\u00e9e, avis d\\\\u00e9pos\\\\u00e9, et participation aux \\\\u00e9v\\\\u00e9nements</li><li><strong>Montez de niveau</strong> : Bronze \\\\u2192 Argent \\\\u2192 Or \\\\u2192 Platine</li><li><strong>D\\\\u00e9bloquez des avantages</strong> : r\\\\u00e9ductions exclusives, acc\\\\u00e8s prioritaire, offres VIP</li></ul><p>Consultez votre solde de points et votre niveau dans votre <strong>profil</strong> \\\\u2192 section <strong>\\\\u00ab Fid\\\\u00e9lit\\\\u00e9 \\\\u00bb</strong>.</p>\",\n    answer_html_en: \"<p>The sam.ma <strong>loyalty program</strong> rewards your activity:</p><ul><li><strong>Earn points</strong> with each honored reservation, review posted, and event participation</li><li><strong>Level up</strong>: Bronze \\\\u2192 Silver \\\\u2192 Gold \\\\u2192 Platinum</li><li><strong>Unlock benefits</strong>: exclusive discounts, priority access, VIP offers</li></ul><p>Check your points balance and level in your <strong>profile</strong> \\\\u2192 <strong>\\\\\"Loyalty\\\\\"</strong> section.</p>\",\n    category: \"support_general\",\n    display_order: 2,\n    is_published: true,\n    tags: [\"loyalty\", \"fidelite\", \"points\", \"rewards\", \"levels\"],\n    created_at: now,\n    updated_at: now,\n  },\n  {\n    title: \"Qu\\\\u2019est-ce que la politique anti no-show de sam.ma ?\",\n    body: \"<p>sam.ma applique une politique anti no-show progressive avec p\\\\u00e9nalit\\\\u00e9s, suspensions et processus de contestation.</p>\",\n    question_fr: \"Qu\\\\u2019est-ce que la politique anti no-show de sam.ma ?\",\n    question_en: \"What is sam.ma's anti no-show policy?\",\n    answer_html_fr: \"<p>Pour prot\\\\u00e9ger nos partenaires \\\\u00e9tablissements, sam.ma applique une <strong>politique anti no-show</strong> progressive :</p><ul><li><strong>1er no-show :</strong> Avertissement + p\\\\u00e9nalit\\\\u00e9 scoring \\(-15 pts\\)</li><li><strong>3 no-shows cons\\\\u00e9cutifs :</strong> Suspension temporaire de 7 jours</li><li><strong>5 no-shows cumul\\\\u00e9s :</strong> Suspension de 30 jours</li></ul><p><strong>Processus de litige :</strong></p><ol><li>Le professionnel d\\\\u00e9clare un no-show</li><li>Vous avez <strong>48 heures</strong> pour contester</li><li>Si vous contestez, un arbitrage est r\\\\u00e9alis\\\\u00e9 par l\\\\u2019\\\\u00e9quipe sam.ma</li><li>Si vous ne r\\\\u00e9pondez pas dans les 48h, le no-show est confirm\\\\u00e9 automatiquement</li></ol><p>Les suspensions sont <strong>lev\\\\u00e9es automatiquement</strong> \\\\u00e0 leur expiration.</p>\",\n    answer_html_en: \"<p>To protect our partner establishments, sam.ma applies a <strong>progressive anti no-show policy</strong>:</p><ul><li><strong>1st no-show:</strong> Warning + scoring penalty \\(-15 pts\\)</li><li><strong>3 consecutive no-shows:</strong> 7-day temporary suspension</li><li><strong>5 cumulative no-shows:</strong> 30-day suspension</li></ul><p><strong>Dispute process:</strong></p><ol><li>The professional declares a no-show</li><li>You have <strong>48 hours</strong> to dispute</li><li>If you dispute, arbitration is handled by the sam.ma team</li><li>If you don't respond within 48h, the no-show is automatically confirmed</li></ol><p>Suspensions are <strong>automatically lifted</strong> upon expiry.</p>\",\n    category: \"support_general\",\n    display_order: 3,\n    is_published: true,\n    tags: [\"no-show\", \"policy\", \"suspension\", \"dispute\", \"anti-fraud\"],\n    created_at: now,\n    updated_at: now,\n  },\n];\n\nasync function main\\(\\) {\n  console.log\\(`Inserting ${articles.length} FAQ articles...`\\);\n\n  const { data, error } = await supabase\n    .from\\(\"faq_articles\"\\)\n    .insert\\(articles\\)\n    .select\\(\"id, question_fr\"\\);\n\n  if \\(error\\) {\n    console.error\\(\"INSERT FAILED:\", error.message\\);\n    console.error\\(\"Details:\", JSON.stringify\\(error, null, 2\\)\\);\n    process.exit\\(1\\);\n  }\n\n  console.log\\(`SUCCESS: ${data.length} FAQ articles inserted.`\\);\n  for \\(const row of data\\) {\n    console.log\\(`  - [${row.id}] ${row.question_fr}`\\);\n  }\n\n  process.exit\\(0\\);\n}\n\nmain\\(\\);\nSCRIPT_EOF)",
      "Bash(while read f)",
      "Bash(do if grep -q \"CREATE TABLE.*faq\" \"$f\")",
      "Bash(then echo \"Found in: $f\")",
      "Bash(pnpm tsc:*)",
      "Bash(ps:*)",
      "Bash(# Use the Supabase Management API to execute SQL # The management API endpoint is: https://api.supabase.com/v1/projects/{ref}/database/query # But it requires a Supabase access token \\(not service_role_key\\) # Let''s check if there''s a Supabase access token in env cat \"\"/Users/salaheddineaitnasser/Downloads/Sortir Au Maroc - Official/.env\"\")",
      "Bash(__NEW_LINE_04c08b30716a4ba2__ echo \"=== §1: KEY COUNTS ===\")",
      "Bash(__NEW_LINE_04c08b30716a4ba2__ echo \"\")",
      "Bash(for file in:*)",
      "Bash(do)",
      "Bash(if grep -q \"applySeo\" \"$file\")",
      "Bash(then)",
      "Bash(if ! grep -q \"buildI18nSeoFields\" \"$file\")",
      "Bash(basename:*)",
      "Bash(cd /Users/salaheddineaitnasser/Downloads/Sortir\\\\ Au\\\\ Maroc\\\\ -\\\\ Official && pnpm run typecheck:*)",
      "Bash(pnpm run typecheck:*)",
      "Bash(SUPA_URL=\"https://ogjghzgzkxxoggocadln.supabase.co\")",
      "Bash(SUPA_KEY=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9namdoemd6a3h4b2dnb2NhZGxuIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2NjE3NTAyOCwiZXhwIjoyMDgxNzUxMDI4fQ.sniHdQ-EWw2ZdMj2gEjnrIvwLyinoLlVQ0aJL3-BNww\")",
      "Bash(for id in 01d70ffb-7566-4881-ab9d-58f9f0c92c8d 2cfcfedf-73f1-45cd-ba6f-d97810cd2b3a e34aecf5-96ff-4b09-8106-508c22115dc4 0b064452-e866-4140-9cd4-c78acd7f8382 2379e438-8d58-4218-a4a7-821177ed1649)",
      "Bash(ANON_KEY=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9namdoemd6a3h4b2dnb2NhZGxuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYxNzUwMjgsImV4cCI6MjA4MTc1MTAyOH0.n0G-QYQpLAJ9Xe8il3PWkeYVRVQUXdmdN-9UL_E4yjw\")",
      "Bash(SRK=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9namdoemd6a3h4b2dnb2NhZGxuIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2NjE3NTAyOCwiZXhwIjoyMDgxNzUxMDI4fQ.sniHdQ-EWw2ZdMj2gEjnrIvwLyinoLlVQ0aJL3-BNww\")",
      "Bash(SUPABASE_URL=\"https://ogjghzgzkxxoggocadln.supabase.co\")",
      "Bash(SUPABASE_KEY=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9namdoemd6a3h4b2dnb2NhZGxuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjkyNTEyODAsImV4cCI6MjA0NDgyNzI4MH0.UPPHnFCL5T3JOC-Gb8f8MnZVbVnMBWbEMFjjFrUxBaQ\")",
      "Bash(do grep -l \"border-primary\\\\|bg-\\\\[#a3001d\\\\]\" \"$f\")",
      "Bash(pnpm run build:plesk:*)",
      "Bash(\"/Users/salaheddineaitnasser/Downloads/sam.ma - Official/client/pages/CeAdmin.tsx\" << 'ENDOFFILE'\n/**\n * CeAdmin — Espace Comité d'Entreprise \\(company admin portal\\)\n *\n * Route: /ce-admin/:slug\n * Auth: Supabase consumer auth → company_admins table\n */\n\nimport { useCallback, useEffect, useState } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport {\n  Building2,\n  Users,\n  ScanLine,\n  Settings,\n  LayoutDashboard,\n  LogOut,\n  ChevronDown,\n  Search,\n  CheckCircle2,\n  XCircle,\n  Clock,\n  RefreshCw,\n  Download,\n  UserCheck,\n  UserX,\n  RotateCcw,\n  Trash2,\n  BarChart3,\n  CalendarDays,\n  TrendingUp,\n  Eye,\n  AlertTriangle,\n} from \"lucide-react\";\nimport { supabase, isAuthed, getConsumerAccessToken } from \"@/lib/auth\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  Card,\n  CardContent,\n  CardHeader,\n  CardTitle,\n  CardDescription,\n} from \"@/components/ui/card\";\nimport { Tabs, TabsList, TabsTrigger, TabsContent } from \"@/components/ui/tabs\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n  DialogFooter,\n} from \"@/components/ui/dialog\";\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Label } from \"@/components/ui/label\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { toast } from \"@/hooks/use-toast\";\nimport { cn } from \"@/lib/utils\";\nimport type {\n  Company,\n  CompanyDashboardStats,\n  EmployeeWithUser,\n  ScanWithDetails,\n  EmployeeStatus,\n} from \"../../shared/ceTypes\";\n\n// ============================================================\n// API helpers \\(inline — mirrors ceCompanyApi.ts\\)\n// ============================================================\n\nasync function ceJson<T>\\(path: string, init?: RequestInit\\): Promise<T> {\n  const token = await getConsumerAccessToken\\(\\);\n  if \\(!token\\) throw new Error\\(\"Non authentifié\"\\);\n  const res = await fetch\\(path, {\n    ...init,\n    headers: {\n      \"content-type\": \"application/json\",\n      authorization: `Bearer ${token}`,\n      ...\\(init?.headers ?? {}\\),\n    },\n  }\\);\n  const json = await res.json\\(\\);\n  if \\(!res.ok\\) throw new Error\\(json.error ?? \"Erreur serveur\"\\);\n  return json;\n}\n\n// ============================================================\n// Status Badges\n// ============================================================\n\nfunction EmployeeStatusBadge\\({ status }: { status: EmployeeStatus }\\) {\n  const map: Record<EmployeeStatus, { label: string; variant: string; icon: React.ReactNode }> = {\n    active: { label: \"Actif\", variant: \"bg-green-100 text-green-700\", icon: <CheckCircle2 className=\"h-3 w-3\" /> },\n    pending: { label: \"En attente\", variant: \"bg-yellow-100 text-yellow-700\", icon: <Clock className=\"h-3 w-3\" /> },\n    suspended: { label: \"Suspendu\", variant: \"bg-red-100 text-red-700\", icon: <XCircle className=\"h-3 w-3\" /> },\n    deleted: { label: \"Supprimé\", variant: \"bg-gray-100 text-gray-500\", icon: <Trash2 className=\"h-3 w-3\" /> },\n  };\n  const m = map[status] ?? { label: status, variant: \"bg-gray-100 text-gray-500\", icon: null };\n  return \\(\n    <span className={cn\\(\"inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-xs font-medium\", m.variant\\)}>\n      {m.icon} {m.label}\n    </span>\n  \\);\n}\n\nfunction ScanStatusBadge\\({ status }: { status: string }\\) {\n  const map: Record<string, { label: string; cls: string }> = {\n    validated: { label: \"Validé\", cls: \"bg-green-100 text-green-700\" },\n    refused: { label: \"Refusé\", cls: \"bg-red-100 text-red-700\" },\n    expired: { label: \"Expiré\", cls: \"bg-gray-100 text-gray-500\" },\n  };\n  const m = map[status] ?? { label: status, cls: \"bg-gray-100 text-gray-500\" };\n  return <span className={cn\\(\"inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium\", m.cls\\)}>{m.label}</span>;\n}\n\n// ============================================================\n// Dashboard Tab\n// ============================================================\n\nfunction DashboardTab\\({ stats, loading }: { stats: CompanyDashboardStats | null; loading: boolean }\\) {\n  if \\(loading\\) return <div className=\"flex justify-center py-12\"><RefreshCw className=\"h-6 w-6 animate-spin text-muted-foreground\" /></div>;\n  if \\(!stats\\) return <p className=\"text-muted-foreground py-8 text-center\">Aucune donnée disponible.</p>;\n\n  const kpis = [\n    { label: \"Salariés actifs\", value: stats.active_employees, icon: UserCheck, color: \"text-green-600\" },\n    { label: \"En attente\", value: stats.pending_employees, icon: Clock, color: \"text-yellow-600\" },\n    { label: \"Suspendus\", value: stats.suspended_employees, icon: UserX, color: \"text-red-600\" },\n    { label: \"Total salariés\", value: stats.total_employees, icon: Users, color: \"text-blue-600\" },\n    { label: \"Scans aujourd'hui\", value: stats.scans_today, icon: ScanLine, color: \"text-purple-600\" },\n    { label: \"Scans cette semaine\", value: stats.scans_this_week, icon: CalendarDays, color: \"text-indigo-600\" },\n    { label: \"Scans ce mois\", value: stats.scans_this_month, icon: TrendingUp, color: \"text-teal-600\" },\n  ];\n\n  return \\(\n    <div className=\"space-y-6\">\n      <div className=\"grid grid-cols-2 gap-4 sm:grid-cols-3 lg:grid-cols-4\">\n        {kpis.map\\(\\(k\\) => \\(\n          <Card key={k.label}>\n            <CardContent className=\"flex items-center gap-3 p-4\">\n              <k.icon className={cn\\(\"h-8 w-8 shrink-0\", k.color\\)} />\n              <div>\n                <p className=\"text-2xl font-bold\">{k.value}</p>\n                <p className=\"text-xs text-muted-foreground\">{k.label}</p>\n              </div>\n            </CardContent>\n          </Card>\n        \\)\\)}\n      </div>\n\n      {stats.top_establishments.length > 0 && \\(\n        <Card>\n          <CardHeader><CardTitle className=\"text-base\">Top Établissements</CardTitle></CardHeader>\n          <CardContent>\n            <Table>\n              <TableHeader>\n                <TableRow>\n                  <TableHead>Établissement</TableHead>\n                  <TableHead className=\"text-right\">Scans</TableHead>\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {stats.top_establishments.map\\(\\(e\\) => \\(\n                  <TableRow key={e.establishment_id}>\n                    <TableCell className=\"font-medium\">{e.establishment_name}</TableCell>\n                    <TableCell className=\"text-right\">{e.scans_count}</TableCell>\n                  </TableRow>\n                \\)\\)}\n              </TableBody>\n            </Table>\n          </CardContent>\n        </Card>\n      \\)}\n    </div>\n  \\);\n}\n\n// ============================================================\n// Employees Tab\n// ============================================================\n\nfunction EmployeesTab\\({ companyId }: { companyId: string }\\) {\n  const [employees, setEmployees] = useState<EmployeeWithUser[]>\\([]\\);\n  const [loading, setLoading] = useState\\(true\\);\n  const [search, setSearch] = useState\\(\"\"\\);\n  const [statusFilter, setStatusFilter] = useState\\(\"all\"\\);\n  const [page, setPage] = useState\\(1\\);\n  const [total, setTotal] = useState\\(0\\);\n  const [actionLoading, setActionLoading] = useState<string | null>\\(null\\);\n  const [confirmAction, setConfirmAction] = useState<{ id: string; action: \"validate\" | \"suspend\" | \"reactivate\" | \"delete\"; name: string } | null>\\(null\\);\n  const limit = 20;\n\n  const fetch_ = useCallback\\(async \\(\\) => {\n    setLoading\\(true\\);\n    try {\n      const params = new URLSearchParams\\({ page: String\\(page\\), limit: String\\(limit\\) }\\);\n      if \\(search\\) params.set\\(\"search\", search\\);\n      if \\(statusFilter !== \"all\"\\) params.set\\(\"status\", statusFilter\\);\n      const data: any = await ceJson\\(`/api/ce/company/employees?${params}`\\);\n      setEmployees\\(data.data ?? []\\);\n      setTotal\\(data.total ?? 0\\);\n    } catch \\(e: any\\) {\n      toast\\({ title: \"Erreur\", description: e.message, variant: \"destructive\" }\\);\n    } finally {\n      setLoading\\(false\\);\n    }\n  }, [page, search, statusFilter]\\);\n\n  useEffect\\(\\(\\) => { fetch_\\(\\); }, [fetch_]\\);\n\n  const doAction = async \\(id: string, action: string\\) => {\n    setActionLoading\\(id\\);\n    try {\n      await ceJson\\(`/api/ce/company/employees/${id}/${action}`, { method: \"PUT\" }\\);\n      toast\\({ title: \"Succès\", description: `Salarié ${action === \"validate\" ? \"validé\" : action === \"suspend\" ? \"suspendu\" : action === \"reactivate\" ? \"réactivé\" : \"supprimé\"}.` }\\);\n      fetch_\\(\\);\n    } catch \\(e: any\\) {\n      toast\\({ title: \"Erreur\", description: e.message, variant: \"destructive\" }\\);\n    } finally {\n      setActionLoading\\(null\\);\n      setConfirmAction\\(null\\);\n    }\n  };\n\n  const doDelete = async \\(id: string\\) => {\n    setActionLoading\\(id\\);\n    try {\n      await ceJson\\(`/api/ce/company/employees/${id}`, { method: \"DELETE\" }\\);\n      toast\\({ title: \"Succès\", description: \"Salarié supprimé.\" }\\);\n      fetch_\\(\\);\n    } catch \\(e: any\\) {\n      toast\\({ title: \"Erreur\", description: e.message, variant: \"destructive\" }\\);\n    } finally {\n      setActionLoading\\(null\\);\n      setConfirmAction\\(null\\);\n    }\n  };\n\n  const totalPages = Math.ceil\\(total / limit\\);\n\n  return \\(\n    <div className=\"space-y-4\">\n      <div className=\"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between\">\n        <div className=\"flex flex-1 gap-2\">\n          <div className=\"relative flex-1 max-w-xs\">\n            <Search className=\"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground\" />\n            <Input placeholder=\"Rechercher...\" value={search} onChange={\\(e\\) => { setSearch\\(e.target.value\\); setPage\\(1\\); }} className=\"pl-8\" />\n          </div>\n          <Select value={statusFilter} onValueChange={\\(v\\) => { setStatusFilter\\(v\\); setPage\\(1\\); }}>\n            <SelectTrigger className=\"w-36\"><SelectValue /></SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"all\">Tous</SelectItem>\n              <SelectItem value=\"active\">Actifs</SelectItem>\n              <SelectItem value=\"pending\">En attente</SelectItem>\n              <SelectItem value=\"suspended\">Suspendus</SelectItem>\n            </SelectContent>\n          </Select>\n        </div>\n        <Button variant=\"outline\" size=\"sm\" onClick={fetch_}><RefreshCw className=\"mr-1.5 h-3.5 w-3.5\" /> Actualiser</Button>\n      </div>\n\n      {loading ? \\(\n        <div className=\"flex justify-center py-12\"><RefreshCw className=\"h-6 w-6 animate-spin text-muted-foreground\" /></div>\n      \\) : employees.length === 0 ? \\(\n        <p className=\"text-muted-foreground text-center py-8\">Aucun salarié trouvé.</p>\n      \\) : \\(\n        <div className=\"rounded-md border overflow-auto\">\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead>Nom</TableHead>\n                <TableHead>Email</TableHead>\n                <TableHead>Téléphone</TableHead>\n                <TableHead>Statut</TableHead>\n                <TableHead>Inscrit le</TableHead>\n                <TableHead className=\"text-right\">Actions</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {employees.map\\(\\(emp\\) => \\(\n                <TableRow key={emp.id}>\n                  <TableCell className=\"font-medium\">{emp.user_name ?? \"—\"}</TableCell>\n                  <TableCell className=\"text-sm text-muted-foreground\">{emp.user_email ?? \"—\"}</TableCell>\n                  <TableCell className=\"text-sm text-muted-foreground\">{emp.user_phone ?? \"—\"}</TableCell>\n                  <TableCell><EmployeeStatusBadge status={emp.status} /></TableCell>\n                  <TableCell className=\"text-sm text-muted-foreground\">{new Date\\(emp.created_at\\).toLocaleDateString\\(\"fr-FR\"\\)}</TableCell>\n                  <TableCell className=\"text-right\">\n                    <div className=\"flex justify-end gap-1\">\n                      {emp.status === \"pending\" && \\(\n                        <Button variant=\"ghost\" size=\"sm\" disabled={actionLoading === emp.id} onClick={\\(\\) => setConfirmAction\\({ id: emp.id, action: \"validate\", name: emp.user_name ?? \"ce salarié\" }\\)}>\n                          <UserCheck className=\"h-4 w-4 text-green-600\" />\n                        </Button>\n                      \\)}\n                      {emp.status === \"active\" && \\(\n                        <Button variant=\"ghost\" size=\"sm\" disabled={actionLoading === emp.id} onClick={\\(\\) => setConfirmAction\\({ id: emp.id, action: \"suspend\", name: emp.user_name ?? \"ce salarié\" }\\)}>\n                          <UserX className=\"h-4 w-4 text-orange-600\" />\n                        </Button>\n                      \\)}\n                      {emp.status === \"suspended\" && \\(\n                        <Button variant=\"ghost\" size=\"sm\" disabled={actionLoading === emp.id} onClick={\\(\\) => setConfirmAction\\({ id: emp.id, action: \"reactivate\", name: emp.user_name ?? \"ce salarié\" }\\)}>\n                          <RotateCcw className=\"h-4 w-4 text-blue-600\" />\n                        </Button>\n                      \\)}\n                      {emp.status !== \"deleted\" && \\(\n                        <Button variant=\"ghost\" size=\"sm\" disabled={actionLoading === emp.id} onClick={\\(\\) => setConfirmAction\\({ id: emp.id, action: \"delete\", name: emp.user_name ?? \"ce salarié\" }\\)}>\n                          <Trash2 className=\"h-4 w-4 text-red-500\" />\n                        </Button>\n                      \\)}\n                    </div>\n                  </TableCell>\n                </TableRow>\n              \\)\\)}\n            </TableBody>\n          </Table>\n        </div>\n      \\)}\n\n      {totalPages > 1 && \\(\n        <div className=\"flex items-center justify-between text-sm\">\n          <span className=\"text-muted-foreground\">{total} salarié{total > 1 ? \"s\" : \"\"}</span>\n          <div className=\"flex gap-1\">\n            <Button variant=\"outline\" size=\"sm\" disabled={page <= 1} onClick={\\(\\) => setPage\\(\\(p\\) => p - 1\\)}>Précédent</Button>\n            <span className=\"px-3 py-1.5 text-sm\">{page}/{totalPages}</span>\n            <Button variant=\"outline\" size=\"sm\" disabled={page >= totalPages} onClick={\\(\\) => setPage\\(\\(p\\) => p + 1\\)}>Suivant</Button>\n          </div>\n        </div>\n      \\)}\n\n      <AlertDialog open={!!confirmAction} onOpenChange={\\(\\) => setConfirmAction\\(null\\)}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>\n              {confirmAction?.action === \"validate\" && \"Valider ce salarié ?\"}\n              {confirmAction?.action === \"suspend\" && \"Suspendre ce salarié ?\"}\n              {confirmAction?.action === \"reactivate\" && \"Réactiver ce salarié ?\"}\n              {confirmAction?.action === \"delete\" && \"Supprimer ce salarié ?\"}\n            </AlertDialogTitle>\n            <AlertDialogDescription>\n              {confirmAction?.action === \"validate\" && `${confirmAction.name} sera activé et pourra utiliser ses avantages CE.`}\n              {confirmAction?.action === \"suspend\" && `${confirmAction.name} ne pourra plus utiliser ses avantages CE.`}\n              {confirmAction?.action === \"reactivate\" && `${confirmAction.name} retrouvera l'accès à ses avantages CE.`}\n              {confirmAction?.action === \"delete\" && `${confirmAction.name} sera définitivement retiré de l'entreprise.`}\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel>Annuler</AlertDialogCancel>\n            <AlertDialogAction\n              onClick={\\(\\) => {\n                if \\(!confirmAction\\) return;\n                if \\(confirmAction.action === \"delete\"\\) doDelete\\(confirmAction.id\\);\n                else doAction\\(confirmAction.id, confirmAction.action\\);\n              }}\n              className={confirmAction?.action === \"delete\" ? \"bg-red-600 hover:bg-red-700\" : \"\"}\n            >\n              Confirmer\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </div>\n  \\);\n}\n\n// ============================================================\n// Scans Tab\n// ============================================================\n\nfunction ScansTab\\(\\) {\n  const [scans, setScans] = useState<ScanWithDetails[]>\\([]\\);\n  const [loading, setLoading] = useState\\(true\\);\n  const [page, setPage] = useState\\(1\\);\n  const [total, setTotal] = useState\\(0\\);\n  const limit = 30;\n\n  const fetch_ = useCallback\\(async \\(\\) => {\n    setLoading\\(true\\);\n    try {\n      const params = new URLSearchParams\\({ page: String\\(page\\), limit: String\\(limit\\) }\\);\n      const data: any = await ceJson\\(`/api/ce/company/scans?${params}`\\);\n      setScans\\(data.data ?? []\\);\n      setTotal\\(data.total ?? 0\\);\n    } catch \\(e: any\\) {\n      toast\\({ title: \"Erreur\", description: e.message, variant: \"destructive\" }\\);\n    } finally {\n      setLoading\\(false\\);\n    }\n  }, [page]\\);\n\n  useEffect\\(\\(\\) => { fetch_\\(\\); }, [fetch_]\\);\n\n  const totalPages = Math.ceil\\(total / limit\\);\n\n  return \\(\n    <div className=\"space-y-4\">\n      <div className=\"flex items-center justify-between\">\n        <p className=\"text-sm text-muted-foreground\">{total} scan{total > 1 ? \"s\" : \"\"}</p>\n        <Button variant=\"outline\" size=\"sm\" onClick={fetch_}><RefreshCw className=\"mr-1.5 h-3.5 w-3.5\" /> Actualiser</Button>\n      </div>\n\n      {loading ? \\(\n        <div className=\"flex justify-center py-12\"><RefreshCw className=\"h-6 w-6 animate-spin text-muted-foreground\" /></div>\n      \\) : scans.length === 0 ? \\(\n        <p className=\"text-muted-foreground text-center py-8\">Aucun scan enregistré.</p>\n      \\) : \\(\n        <div className=\"rounded-md border overflow-auto\">\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead>Date</TableHead>\n                <TableHead>Salarié</TableHead>\n                <TableHead>Établissement</TableHead>\n                <TableHead>Avantage</TableHead>\n                <TableHead>Statut</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {scans.map\\(\\(s\\) => \\(\n                <TableRow key={s.id}>\n                  <TableCell className=\"text-sm\">{new Date\\(s.scan_datetime\\).toLocaleString\\(\"fr-FR\", { dateStyle: \"short\", timeStyle: \"short\" }\\)}</TableCell>\n                  <TableCell className=\"font-medium\">{s.employee_display_name ?? s.employee_name ?? \"—\"}</TableCell>\n                  <TableCell>{s.establishment_name ?? \"—\"}</TableCell>\n                  <TableCell className=\"text-sm text-muted-foreground max-w-[200px] truncate\">{s.advantage_description ?? \"—\"}</TableCell>\n                  <TableCell><ScanStatusBadge status={s.status} /></TableCell>\n                </TableRow>\n              \\)\\)}\n            </TableBody>\n          </Table>\n        </div>\n      \\)}\n\n      {totalPages > 1 && \\(\n        <div className=\"flex items-center justify-end gap-1 text-sm\">\n          <Button variant=\"outline\" size=\"sm\" disabled={page <= 1} onClick={\\(\\) => setPage\\(\\(p\\) => p - 1\\)}>Précédent</Button>\n          <span className=\"px-3 py-1.5\">{page}/{totalPages}</span>\n          <Button variant=\"outline\" size=\"sm\" disabled={page >= totalPages} onClick={\\(\\) => setPage\\(\\(p\\) => p + 1\\)}>Suivant</Button>\n        </div>\n      \\)}\n    </div>\n  \\);\n}\n\n// ============================================================\n// Settings Tab\n// ============================================================\n\nfunction SettingsTab\\({ company, onUpdate }: { company: Company; onUpdate: \\(\\) => void }\\) {\n  const [autoValidate, setAutoValidate] = useState\\(company.auto_validate_employees\\);\n  const [domain, setDomain] = useState\\(company.auto_validate_domain ?? \"\"\\);\n  const [welcome, setWelcome] = useState\\(company.welcome_message ?? \"\"\\);\n  const [saving, setSaving] = useState\\(false\\);\n\n  const save = async \\(\\) => {\n    setSaving\\(true\\);\n    try {\n      await ceJson\\(\"/api/ce/company/settings\", {\n        method: \"PUT\",\n        body: JSON.stringify\\({\n          auto_validate_employees: autoValidate,\n          auto_validate_domain: domain || null,\n          welcome_message: welcome || null,\n        }\\),\n      }\\);\n      toast\\({ title: \"Paramètres enregistrés\" }\\);\n      onUpdate\\(\\);\n    } catch \\(e: any\\) {\n      toast\\({ title: \"Erreur\", description: e.message, variant: \"destructive\" }\\);\n    } finally {\n      setSaving\\(false\\);\n    }\n  };\n\n  return \\(\n    <div className=\"max-w-xl space-y-6\">\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"text-base\">Validation automatique</CardTitle>\n          <CardDescription>Validez automatiquement les salariés dont l'email correspond à votre domaine.</CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"flex items-center gap-3\">\n            <Switch checked={autoValidate} onCheckedChange={setAutoValidate} />\n            <Label>Activer la validation automatique</Label>\n          </div>\n          {autoValidate && \\(\n            <div className=\"space-y-1.5\">\n              <Label>Domaine email</Label>\n              <Input placeholder=\"monentreprise.ma\" value={domain} onChange={\\(e\\) => setDomain\\(e.target.value\\)} />\n              <p className=\"text-xs text-muted-foreground\">Les salariés avec un email @{domain || \"...\"} seront validés automatiquement.</p>\n            </div>\n          \\)}\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"text-base\">Message d'accueil</CardTitle>\n          <CardDescription>Affiché aux salariés lors de leur inscription.</CardDescription>\n        </CardHeader>\n        <CardContent>\n          <Textarea placeholder=\"Bienvenue dans le programme CE de notre entreprise...\" value={welcome} onChange={\\(e\\) => setWelcome\\(e.target.value\\)} rows={4} />\n        </CardContent>\n      </Card>\n\n      <div className=\"flex justify-end\">\n        <Button onClick={save} disabled={saving}>\n          {saving ? <RefreshCw className=\"mr-1.5 h-3.5 w-3.5 animate-spin\" /> : null}\n          Enregistrer\n        </Button>\n      </div>\n    </div>\n  \\);\n}\n\n// ============================================================\n// Main CeAdmin Page\n// ============================================================\n\nexport default function CeAdmin\\(\\) {\n  const { slug } = useParams<{ slug: string }>\\(\\);\n  const navigate = useNavigate\\(\\);\n  const [company, setCompany] = useState<Company | null>\\(null\\);\n  const [stats, setStats] = useState<CompanyDashboardStats | null>\\(null\\);\n  const [loading, setLoading] = useState\\(true\\);\n  const [statsLoading, setStatsLoading] = useState\\(true\\);\n  const [tab, setTab] = useState\\(\"dashboard\"\\);\n\n  const fetchCompany = useCallback\\(async \\(\\) => {\n    try {\n      const data: any = await ceJson\\(\"/api/ce/company/me\"\\);\n      setCompany\\(data.data ?? data\\);\n    } catch \\(e: any\\) {\n      toast\\({ title: \"Accès refusé\", description: e.message, variant: \"destructive\" }\\);\n      navigate\\(\"/\"\\);\n    } finally {\n      setLoading\\(false\\);\n    }\n  }, [navigate]\\);\n\n  const fetchStats = useCallback\\(async \\(\\) => {\n    setStatsLoading\\(true\\);\n    try {\n      const data: any = await ceJson\\(\"/api/ce/company/dashboard\"\\);\n      setStats\\(data.data ?? data\\);\n    } catch {\n      // ignore\n    } finally {\n      setStatsLoading\\(false\\);\n    }\n  }, []\\);\n\n  useEffect\\(\\(\\) => {\n    if \\(!isAuthed\\(\\)\\) {\n      navigate\\(\"/\"\\);\n      return;\n    }\n    fetchCompany\\(\\);\n    fetchStats\\(\\);\n  }, [fetchCompany, fetchStats, navigate]\\);\n\n  const signOut = async \\(\\) => {\n    await supabase.auth.signOut\\(\\);\n    navigate\\(\"/\"\\);\n  };\n\n  if \\(loading\\) {\n    return \\(\n      <div className=\"flex min-h-screen items-center justify-center\">\n        <RefreshCw className=\"h-8 w-8 animate-spin text-muted-foreground\" />\n      </div>\n    \\);\n  }\n\n  if \\(!company\\) return null;\n\n  const registrationUrl = `${window.location.origin}/ce/${company.registration_code}`;\n\n  return \\(\n    <div className=\"min-h-screen bg-muted/30\">\n      {/* Header */}\n      <header className=\"sticky top-0 z-40 border-b bg-white\">\n        <div className=\"mx-auto flex h-14 max-w-6xl items-center justify-between px-4\">\n          <div className=\"flex items-center gap-3\">\n            {company.logo_url ? \\(\n              <img src={company.logo_url} alt=\"\" className=\"h-8 w-8 rounded-full object-cover\" />\n            \\) : \\(\n              <Building2 className=\"h-6 w-6 text-primary\" />\n            \\)}\n            <div>\n              <h1 className=\"text-sm font-semibold leading-tight\">{company.name}</h1>\n              <p className=\"text-xs text-muted-foreground\">Espace Comité d'Entreprise</p>\n            </div>\n          </div>\n          <Button variant=\"ghost\" size=\"sm\" onClick={signOut}>\n            <LogOut className=\"mr-1.5 h-4 w-4\" /> Déconnexion\n          </Button>\n        </div>\n      </header>\n\n      {/* Registration Link Banner */}\n      <div className=\"border-b bg-blue-50\">\n        <div className=\"mx-auto flex max-w-6xl items-center gap-3 px-4 py-2.5\">\n          <div className=\"flex-1\">\n            <p className=\"text-xs font-medium text-blue-700\">Lien d'inscription salariés</p>\n            <code className=\"text-xs text-blue-600 break-all\">{registrationUrl}</code>\n          </div>\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            className=\"shrink-0\"\n            onClick={\\(\\) => {\n              navigator.clipboard.writeText\\(registrationUrl\\);\n              toast\\({ title: \"Lien copié !\" }\\);\n            }}\n          >\n            Copier\n          </Button>\n        </div>\n      </div>\n\n      {/* Content */}\n      <main className=\"mx-auto max-w-6xl px-4 py-6\">\n        <Tabs value={tab} onValueChange={setTab}>\n          <TabsList className=\"mb-6 w-full justify-start overflow-x-auto\">\n            <TabsTrigger value=\"dashboard\" className=\"gap-1.5\"><LayoutDashboard className=\"h-4 w-4\" /> Dashboard</TabsTrigger>\n            <TabsTrigger value=\"employees\" className=\"gap-1.5\"><Users className=\"h-4 w-4\" /> Salariés</TabsTrigger>\n            <TabsTrigger value=\"scans\" className=\"gap-1.5\"><ScanLine className=\"h-4 w-4\" /> Scans</TabsTrigger>\n            <TabsTrigger value=\"settings\" className=\"gap-1.5\"><Settings className=\"h-4 w-4\" /> Paramètres</TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"dashboard\">\n            <DashboardTab stats={stats} loading={statsLoading} />\n          </TabsContent>\n\n          <TabsContent value=\"employees\">\n            <EmployeesTab companyId={company.id} />\n          </TabsContent>\n\n          <TabsContent value=\"scans\">\n            <ScansTab />\n          </TabsContent>\n\n          <TabsContent value=\"settings\">\n            <SettingsTab company={company} onUpdate={fetchCompany} />\n          </TabsContent>\n        </Tabs>\n      </main>\n    </div>\n  \\);\n}\nENDOFFILE)",
      "Bash(\"/Users/salaheddineaitnasser/Downloads/sam.ma - Official/client/components/ce/ProfileCeTab.tsx\" << 'ENDOFFILE'\n/**\n * ProfileCeTab — CE history and status in user profile\n *\n * Shows: CE status, company info, scan history, link to advantages\n */\n\nimport { useCallback, useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport {\n  Building2,\n  CheckCircle2,\n  Clock,\n  XCircle,\n  ScanLine,\n  QrCode,\n  BadgePercent,\n  RefreshCw,\n  ChevronRight,\n  CalendarDays,\n} from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Card,\n  CardContent,\n  CardHeader,\n  CardTitle,\n} from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { cn } from \"@/lib/utils\";\nimport { useCeStatus } from \"@/hooks/useCeStatus\";\nimport { getConsumerAccessToken } from \"@/lib/auth\";\nimport type { ScanWithDetails, EmployeeStatus } from \"../../../shared/ceTypes\";\n\nfunction StatusBadge\\({ status }: { status: EmployeeStatus | null }\\) {\n  if \\(!status\\) return null;\n  const map: Record<string, { label: string; cls: string }> = {\n    active: { label: \"Actif\", cls: \"bg-green-100 text-green-700\" },\n    pending: { label: \"En attente de validation\", cls: \"bg-yellow-100 text-yellow-700\" },\n    suspended: { label: \"Suspendu\", cls: \"bg-red-100 text-red-700\" },\n  };\n  const m = map[status] ?? { label: status, cls: \"bg-gray-100 text-gray-500\" };\n  return <span className={cn\\(\"inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium\", m.cls\\)}>{m.label}</span>;\n}\n\nfunction ScanStatusIcon\\({ status }: { status: string }\\) {\n  if \\(status === \"validated\"\\) return <CheckCircle2 className=\"h-4 w-4 text-green-500\" />;\n  if \\(status === \"refused\"\\) return <XCircle className=\"h-4 w-4 text-red-500\" />;\n  return <Clock className=\"h-4 w-4 text-gray-400\" />;\n}\n\nexport function ProfileCeTab\\(\\) {\n  const { isCeEmployee, ceStatus, company, profileComplete, loading: ceLoading } = useCeStatus\\(\\);\n  const [history, setHistory] = useState<ScanWithDetails[]>\\([]\\);\n  const [historyLoading, setHistoryLoading] = useState\\(false\\);\n  const [page, setPage] = useState\\(1\\);\n  const [total, setTotal] = useState\\(0\\);\n  const limit = 15;\n\n  const fetchHistory = useCallback\\(async \\(\\) => {\n    setHistoryLoading\\(true\\);\n    try {\n      const token = await getConsumerAccessToken\\(\\);\n      if \\(!token\\) return;\n      const params = new URLSearchParams\\({ page: String\\(page\\), limit: String\\(limit\\) }\\);\n      const res = await fetch\\(`/api/ce/history?${params}`, {\n        headers: { authorization: `Bearer ${token}` },\n      }\\);\n      const json = await res.json\\(\\);\n      if \\(res.ok\\) {\n        setHistory\\(json.data ?? []\\);\n        setTotal\\(json.total ?? 0\\);\n      }\n    } catch {\n      // ignore\n    } finally {\n      setHistoryLoading\\(false\\);\n    }\n  }, [page]\\);\n\n  useEffect\\(\\(\\) => {\n    if \\(ceLoading || !isCeEmployee\\) return;\n    fetchHistory\\(\\);\n  }, [ceLoading, isCeEmployee, fetchHistory]\\);\n\n  if \\(ceLoading\\) {\n    return \\(\n      <div className=\"flex justify-center py-12\">\n        <RefreshCw className=\"h-6 w-6 animate-spin text-muted-foreground\" />\n      </div>\n    \\);\n  }\n\n  if \\(!isCeEmployee\\) {\n    return \\(\n      <div className=\"flex flex-col items-center gap-4 py-12 text-center\">\n        <Building2 className=\"h-12 w-12 text-muted-foreground/40\" />\n        <p className=\"text-muted-foreground\">\n          Vous n'êtes pas inscrit à un programme Comité d'Entreprise.\n        </p>\n        <p className=\"text-xs text-muted-foreground\">\n          Si votre entreprise participe au programme, demandez le lien d'inscription à votre service RH.\n        </p>\n      </div>\n    \\);\n  }\n\n  const totalPages = Math.ceil\\(total / limit\\);\n\n  return \\(\n    <div className=\"space-y-6\">\n      {/* Status Card */}\n      <Card>\n        <CardContent className=\"p-4\">\n          <div className=\"flex items-start gap-3\">\n            {company?.logo_url ? \\(\n              <img src={company.logo_url} alt=\"\" className=\"h-12 w-12 rounded-full object-cover\" />\n            \\) : \\(\n              <div className=\"h-12 w-12 rounded-full bg-blue-100 flex items-center justify-center\">\n                <Building2 className=\"h-6 w-6 text-blue-600\" />\n              </div>\n            \\)}\n            <div className=\"flex-1\">\n              <h3 className=\"font-semibold\">{company?.name ?? \"Entreprise\"}</h3>\n              <StatusBadge status={ceStatus} />\n              {ceStatus === \"active\" && !profileComplete && \\(\n                <p className=\"text-xs text-amber-600 mt-1\">\n                  Veuillez compléter votre profil pour utiliser votre QR code CE.\n                </p>\n              \\)}\n            </div>\n          </div>\n\n          {ceStatus === \"active\" && \\(\n            <div className=\"mt-4 flex flex-wrap gap-2\">\n              <Link to=\"/mon-qr\">\n                <Button size=\"sm\" variant=\"outline\" className=\"gap-1.5\">\n                  <QrCode className=\"h-3.5 w-3.5\" /> Mon QR Code CE\n                </Button>\n              </Link>\n              <Link to=\"/ce/avantages\">\n                <Button size=\"sm\" variant=\"outline\" className=\"gap-1.5\">\n                  <BadgePercent className=\"h-3.5 w-3.5\" /> Mes avantages\n                </Button>\n              </Link>\n            </div>\n          \\)}\n        </CardContent>\n      </Card>\n\n      {/* Scan History */}\n      {ceStatus === \"active\" && \\(\n        <Card>\n          <CardHeader className=\"pb-3\">\n            <div className=\"flex items-center justify-between\">\n              <CardTitle className=\"text-base flex items-center gap-2\">\n                <ScanLine className=\"h-4 w-4\" /> Historique des scans\n              </CardTitle>\n              <Button variant=\"ghost\" size=\"sm\" onClick={fetchHistory}>\n                <RefreshCw className=\"h-3.5 w-3.5\" />\n              </Button>\n            </div>\n          </CardHeader>\n          <CardContent className=\"pt-0\">\n            {historyLoading ? \\(\n              <div className=\"flex justify-center py-8\">\n                <RefreshCw className=\"h-5 w-5 animate-spin text-muted-foreground\" />\n              </div>\n            \\) : history.length === 0 ? \\(\n              <p className=\"text-sm text-muted-foreground text-center py-6\">\n                Aucun scan enregistré pour le moment.\n              </p>\n            \\) : \\(\n              <div className=\"space-y-2\">\n                {history.map\\(\\(scan\\) => \\(\n                  <div key={scan.id} className=\"flex items-center gap-3 p-2.5 rounded-lg border\">\n                    <ScanStatusIcon status={scan.status} />\n                    <div className=\"flex-1 min-w-0\">\n                      <p className=\"text-sm font-medium truncate\">{scan.establishment_name ?? \"Établissement\"}</p>\n                      <p className=\"text-xs text-muted-foreground truncate\">\n                        {scan.advantage_description ?? scan.advantage_type}\n                      </p>\n                    </div>\n                    <div className=\"text-right shrink-0\">\n                      <p className=\"text-xs text-muted-foreground\">\n                        {new Date\\(scan.scan_datetime\\).toLocaleDateString\\(\"fr-FR\", { day: \"numeric\", month: \"short\" }\\)}\n                      </p>\n                      <p className=\"text-[10px] text-muted-foreground\">\n                        {new Date\\(scan.scan_datetime\\).toLocaleTimeString\\(\"fr-FR\", { hour: \"2-digit\", minute: \"2-digit\" }\\)}\n                      </p>\n                    </div>\n                  </div>\n                \\)\\)}\n\n                {totalPages > 1 && \\(\n                  <div className=\"flex items-center justify-center gap-2 pt-2\">\n                    <Button variant=\"outline\" size=\"sm\" disabled={page <= 1} onClick={\\(\\) => setPage\\(\\(p\\) => p - 1\\)}>\n                      Précédent\n                    </Button>\n                    <span className=\"text-xs text-muted-foreground\">{page}/{totalPages}</span>\n                    <Button variant=\"outline\" size=\"sm\" disabled={page >= totalPages} onClick={\\(\\) => setPage\\(\\(p\\) => p + 1\\)}>\n                      Suivant\n                    </Button>\n                  </div>\n                \\)}\n              </div>\n            \\)}\n          </CardContent>\n        </Card>\n      \\)}\n    </div>\n  \\);\n}\nENDOFFILE)",
      "Bash(psql:*)",
      "Bash(TOKEN=\"eyJ2IjoxLCJleHAiOjE3NzE0MTIyODYsInN1YiI6ImRlbW8iLCJjb2xsYWJvcmF0b3JfaWQiOiI5N2Y3MDQwNi1iZTVhLTQ2MmMtYjNhNy1jOTU2ZDVhYmMzNmUiLCJyb2xlIjoic3VwZXJhZG1pbiIsIm5hbWUiOiJTYWxhaCBFLiJ9.7GSrDoGlFJhNGrp9Kmj7GSr_KUfpT7NFGOZw1IppRAU\")",
      "Bash(ss:*)",
      "Bash(brew --prefix:*)",
      "Bash(brew install:*)",
      "Bash(/opt/homebrew/opt/libpq/bin/psql:*)",
      "Bash(host:*)",
      "Bash(nslookup:*)",
      "Bash(\"/Users/salaheddineaitnasser/Downloads/sam.ma - Official/scripts/exec-rental-seed.mjs\" << 'SCRIPT_EOF'\n/**\n * Execute rental demo seed via Supabase JS client \\(PostgREST\\).\n * \n * This script parses the SQL seed file and translates the INSERT statements\n * into Supabase client upsert calls.\n *\n * Usage: node scripts/exec-rental-seed.mjs\n */\nimport 'dotenv/config';\nimport { createClient } from '@supabase/supabase-js';\nimport { readFileSync } from 'fs';\nimport { resolve, dirname } from 'path';\nimport { fileURLToPath } from 'url';\n\nconst __dirname = dirname\\(fileURLToPath\\(import.meta.url\\)\\);\nconst ROOT = resolve\\(__dirname, '..'\\);\n\nconst url = process.env.SUPABASE_URL || process.env.VITE_SUPABASE_URL;\nconst key = process.env.SUPABASE_SERVICE_ROLE_KEY;\nif \\(!url || !key\\) { console.error\\('Missing SUPABASE_URL or SUPABASE_SERVICE_ROLE_KEY'\\); process.exit\\(1\\); }\n\nconst supabase = createClient\\(url, key, {\n  auth: { persistSession: false, autoRefreshToken: false },\n}\\);\n\n// Read the SQL file\nconst sql = readFileSync\\(resolve\\(ROOT, 'server/migrations/20260219_rental_demo_seed.sql'\\), 'utf8'\\);\n\n// ============================================================================\n// PARSE ESTABLISHMENTS\n// ============================================================================\nfunction parseEstablishments\\(\\) {\n  // Extract the INSERT INTO establishments block\n  const match = sql.match\\(/INSERT INTO public\\\\.establishments\\\\s*\\\\\\([^\\)]+\\\\\\)\\\\s*VALUES\\\\s*\\([\\\\s\\\\S]*?\\)ON CONFLICT \\\\\\(id\\\\\\) DO NOTHING;/\\);\n  if \\(!match\\) throw new Error\\('Could not find establishments INSERT'\\);\n  \n  const columns = [\n    'id', 'name', 'slug', 'universe', 'category', 'city', 'address', 'country', 'region',\n    'phone', 'description_short', 'description_long', 'hours',\n    'tags', 'amenities', 'status', 'is_online', 'verified', 'booking_enabled',\n    'avg_rating', 'review_count', 'lat', 'lng', 'extra',\n    'cover_url', 'logo_url'\n  ];\n  \n  const valuesBlock = match[1];\n  // Split on the top-level tuple boundaries. Each establishment starts with a comment line and \\(\n  const tuples = valuesBlock.split\\(/,\\\\s*\\\\n\\\\n--\\\\s*\\\\d+\\\\./\\);\n  \n  const rows = [];\n  // We need to extract each complete \\(...\\) value tuple\n  // Better approach: use a regex to find top-level parenthesized groups\n  const tupleRegex = /\\\\\\(\\\\s*\\\\n?\\\\s*'[0-9a-f-]+'/g;\n  let tupleStarts = [];\n  let m;\n  while \\(\\(m = tupleRegex.exec\\(valuesBlock\\)\\) !== null\\) {\n    tupleStarts.push\\(m.index\\);\n  }\n  \n  for \\(let i = 0; i < tupleStarts.length; i++\\) {\n    const start = tupleStarts[i];\n    const end = i < tupleStarts.length - 1 ? tupleStarts[i + 1] : valuesBlock.length;\n    let tuple = valuesBlock.substring\\(start, end\\).trim\\(\\);\n    // Remove trailing comma\n    tuple = tuple.replace\\(/,\\\\s*$/, ''\\);\n    // Remove surrounding parens\n    tuple = tuple.replace\\(/^\\\\\\(/, ''\\).replace\\(/\\\\\\)\\\\s*$/, ''\\);\n    \n    // Now parse the values - this is tricky because of nested JSON\n    // Use a state machine\n    const values = parseSqlValues\\(tuple\\);\n    \n    if \\(values.length >= columns.length\\) {\n      const row = {};\n      for \\(let j = 0; j < columns.length; j++\\) {\n        row[columns[j]] = convertValue\\(values[j], columns[j]\\);\n      }\n      rows.push\\(row\\);\n    }\n  }\n  \n  return rows;\n}\n\n// ============================================================================\n// PARSE RENTAL VEHICLES\n// ============================================================================\nfunction parseVehicles\\(\\) {\n  const match = sql.match\\(/INSERT INTO public\\\\.rental_vehicles\\\\s*\\\\\\([^\\)]+\\\\\\)\\\\s*VALUES\\\\s*\\([\\\\s\\\\S]*?\\)ON CONFLICT \\\\\\(id\\\\\\) DO NOTHING;/\\);\n  if \\(!match\\) throw new Error\\('Could not find rental_vehicles INSERT'\\);\n  \n  const columns = [\n    'id', 'establishment_id', 'category', 'brand', 'model', 'year', 'photos', 'specs',\n    'mileage_policy', 'mileage_limit_per_day', 'extra_km_cost', 'pricing',\n    'high_season_dates', 'quantity', 'similar_vehicle', 'status', 'sort_order'\n  ];\n  \n  const valuesBlock = match[1];\n  \n  // Find each vehicle tuple - starts with \\('22222222-\n  const tupleRegex = /\\\\\\('22222222-/g;\n  let tupleStarts = [];\n  let m;\n  while \\(\\(m = tupleRegex.exec\\(valuesBlock\\)\\) !== null\\) {\n    tupleStarts.push\\(m.index\\);\n  }\n  \n  const rows = [];\n  for \\(let i = 0; i < tupleStarts.length; i++\\) {\n    const start = tupleStarts[i];\n    const end = i < tupleStarts.length - 1 ? tupleStarts[i + 1] : valuesBlock.length;\n    let tuple = valuesBlock.substring\\(start, end\\).trim\\(\\);\n    // Remove trailing comma and comments\n    tuple = tuple.replace\\(/,\\\\s*\\(--[^\\\\n]*\\)?\\\\s*$/, ''\\);\n    // Remove surrounding parens\n    tuple = tuple.replace\\(/^\\\\\\(/, ''\\).replace\\(/\\\\\\)\\\\s*$/, ''\\);\n    \n    const values = parseSqlValues\\(tuple\\);\n    \n    if \\(values.length >= columns.length\\) {\n      const row = {};\n      for \\(let j = 0; j < columns.length; j++\\) {\n        row[columns[j]] = convertVehicleValue\\(values[j], columns[j]\\);\n      }\n      rows.push\\(row\\);\n    }\n  }\n  \n  return rows;\n}\n\n// ============================================================================\n// PARSE RENTAL OPTIONS\n// ============================================================================\nfunction parseOptions\\(\\) {\n  const match = sql.match\\(/INSERT INTO public\\\\.rental_options\\\\s*\\\\\\([^\\)]+\\\\\\)\\\\s*VALUES\\\\s*\\([\\\\s\\\\S]*?\\)\\(?:;|\\\\n\\\\n--\\)/\\);\n  if \\(!match\\) throw new Error\\('Could not find rental_options INSERT'\\);\n  \n  const columns = ['establishment_id', 'name', 'description', 'price', 'price_type', 'is_mandatory', 'sort_order', 'is_active'];\n  \n  const valuesBlock = match[1];\n  \n  // Find each option tuple\n  const tupleRegex = /\\\\\\('11111111-/g;\n  let tupleStarts = [];\n  let m;\n  while \\(\\(m = tupleRegex.exec\\(valuesBlock\\)\\) !== null\\) {\n    tupleStarts.push\\(m.index\\);\n  }\n  \n  const rows = [];\n  for \\(let i = 0; i < tupleStarts.length; i++\\) {\n    const start = tupleStarts[i];\n    const end = i < tupleStarts.length - 1 ? tupleStarts[i + 1] : valuesBlock.length;\n    let tuple = valuesBlock.substring\\(start, end\\).trim\\(\\);\n    tuple = tuple.replace\\(/,\\\\s*\\(--[^\\\\n]*\\)?\\\\s*$/, ''\\);\n    tuple = tuple.replace\\(/;\\\\s*$/, ''\\);\n    tuple = tuple.replace\\(/^\\\\\\(/, ''\\).replace\\(/\\\\\\)\\\\s*$/, ''\\);\n    \n    const values = parseSqlValues\\(tuple\\);\n    \n    if \\(values.length >= columns.length\\) {\n      const row = {};\n      for \\(let j = 0; j < columns.length; j++\\) {\n        row[columns[j]] = convertOptionValue\\(values[j], columns[j]\\);\n      }\n      rows.push\\(row\\);\n    }\n  }\n  \n  return rows;\n}\n\n// ============================================================================\n// PARSE PROMO CODES\n// ============================================================================\nfunction parsePromoCodes\\(\\) {\n  const match = sql.match\\(/INSERT INTO public\\\\.consumer_promo_codes\\\\s*\\\\\\([^\\)]+\\\\\\)\\\\s*VALUES\\\\s*\\([\\\\s\\\\S]*?\\)ON CONFLICT \\\\\\(code\\\\\\) DO NOTHING;/\\);\n  if \\(!match\\) throw new Error\\('Could not find consumer_promo_codes INSERT'\\);\n  \n  const columns = ['code', 'description', 'discount_bps', 'applies_to_establishment_ids', 'active', 'is_public', 'starts_at', 'ends_at'];\n  \n  const valuesBlock = match[1];\n  \n  // Find each promo tuple\n  const tupleRegex = /\\\\\\('/g;\n  let tupleStarts = [];\n  let m;\n  while \\(\\(m = tupleRegex.exec\\(valuesBlock\\)\\) !== null\\) {\n    tupleStarts.push\\(m.index\\);\n  }\n  \n  const rows = [];\n  for \\(let i = 0; i < tupleStarts.length; i++\\) {\n    const start = tupleStarts[i];\n    const end = i < tupleStarts.length - 1 ? tupleStarts[i + 1] : valuesBlock.length;\n    let tuple = valuesBlock.substring\\(start, end\\).trim\\(\\);\n    tuple = tuple.replace\\(/,\\\\s*$/, ''\\);\n    tuple = tuple.replace\\(/^\\\\\\(/, ''\\).replace\\(/\\\\\\)\\\\s*$/, ''\\);\n    \n    const values = parseSqlValues\\(tuple\\);\n    \n    if \\(values.length >= columns.length\\) {\n      const row = {};\n      for \\(let j = 0; j < columns.length; j++\\) {\n        row[columns[j]] = convertPromoValue\\(values[j], columns[j]\\);\n      }\n      rows.push\\(row\\);\n    }\n  }\n  \n  return rows;\n}\n\n// ============================================================================\n// SQL VALUE PARSER \\(handles nested JSON, arrays, strings\\)\n// ============================================================================\nfunction parseSqlValues\\(tuple\\) {\n  const values = [];\n  let current = '';\n  let depth = 0; // tracks nesting of {}, [], \\(\\)\n  let inString = false;\n  let stringChar = '';\n  let escaped = false;\n  \n  for \\(let i = 0; i < tuple.length; i++\\) {\n    const ch = tuple[i];\n    \n    if \\(escaped\\) {\n      current += ch;\n      escaped = false;\n      continue;\n    }\n    \n    if \\(ch === '\\\\\\\\'\\) {\n      current += ch;\n      escaped = true;\n      continue;\n    }\n    \n    if \\(inString\\) {\n      if \\(ch === stringChar\\) {\n        // Check for escaped quote \\('' in SQL\\)\n        if \\(stringChar === \"'\" && i + 1 < tuple.length && tuple[i + 1] === \"'\"\\) {\n          current += ch;\n          i++; // skip next quote\n          current += \"'\";\n          continue;\n        }\n        inString = false;\n      }\n      current += ch;\n      continue;\n    }\n    \n    if \\(ch === \"'\" || ch === '\"'\\) {\n      inString = true;\n      stringChar = ch;\n      current += ch;\n      continue;\n    }\n    \n    if \\(ch === '{' || ch === '[' || ch === '\\('\\) {\n      depth++;\n      current += ch;\n      continue;\n    }\n    \n    if \\(ch === '}' || ch === ']' || ch === '\\)'\\) {\n      depth--;\n      current += ch;\n      continue;\n    }\n    \n    if \\(ch === ',' && depth === 0\\) {\n      values.push\\(current.trim\\(\\)\\);\n      current = '';\n      continue;\n    }\n    \n    current += ch;\n  }\n  \n  if \\(current.trim\\(\\)\\) {\n    values.push\\(current.trim\\(\\)\\);\n  }\n  \n  return values;\n}\n\n// ============================================================================\n// VALUE CONVERTERS\n// ============================================================================\nfunction stripQuotes\\(v\\) {\n  if \\(v.startsWith\\(\"'\"\\) && v.endsWith\\(\"'\"\\)\\) {\n    return v.slice\\(1, -1\\).replace\\(/''/g, \"'\"\\);\n  }\n  return v;\n}\n\nfunction parseJsonb\\(v\\) {\n  // Remove surrounding quotes\n  let json = stripQuotes\\(v\\);\n  // Handle double-escaped quotes in SQL strings\n  json = json.replace\\(/''/g, \"'\"\\);\n  try {\n    return JSON.parse\\(json\\);\n  } catch {\n    console.warn\\('Failed to parse JSON:', json.substring\\(0, 100\\)\\);\n    return json;\n  }\n}\n\nfunction parsePgArray\\(v\\) {\n  // ARRAY['...','...']::type[] format\n  const match = v.match\\(/ARRAY\\\\[\\([\\\\s\\\\S]*?\\)\\\\]\\(?:::[a-z_[\\\\]]+\\)?/\\);\n  if \\(match\\) {\n    const inner = match[1];\n    // Split by comma, strip quotes\n    return inner.split\\(','\\).map\\(s => stripQuotes\\(s.trim\\(\\)\\)\\).filter\\(Boolean\\);\n  }\n  // '{\"a\",\"b\"}' format\n  if \\(v.startsWith\\(\"'{\"\\) || v.startsWith\\(\"'[\"\\)\\) {\n    const inner = stripQuotes\\(v\\);\n    try { return JSON.parse\\(inner.replace\\(/{/g, '['\\).replace\\(/}/g, ']'\\).replace\\(/\"/g, '\"'\\)\\); } catch {}\n  }\n  return [];\n}\n\nfunction parsePgTextArray\\(v\\) {\n  // '{text1,text2}' format or ARRAY[...] format\n  if \\(v.match\\(/^ARRAY/i\\)\\) {\n    return parsePgArray\\(v\\);\n  }\n  const inner = stripQuotes\\(v\\);\n  if \\(inner.startsWith\\('{'\\) && inner.endsWith\\('}'\\)\\) {\n    return inner.slice\\(1, -1\\).split\\(','\\).map\\(s => s.replace\\(/^\"|\"$/g, ''\\).trim\\(\\)\\).filter\\(Boolean\\);\n  }\n  return [];\n}\n\nfunction convertValue\\(v, col\\) {\n  if \\(v === 'NULL' || v === 'null'\\) return null;\n  if \\(v === 'true'\\) return true;\n  if \\(v === 'false'\\) return false;\n  \n  // JSON columns\n  if \\(['hours', 'extra'].includes\\(col\\)\\) return parseJsonb\\(v\\);\n  \n  // Array columns\n  if \\(['tags', 'amenities'].includes\\(col\\)\\) return parsePgTextArray\\(v\\);\n  \n  // Numeric columns\n  if \\(['avg_rating', 'review_count', 'lat', 'lng'].includes\\(col\\)\\) {\n    return parseFloat\\(stripQuotes\\(v\\)\\);\n  }\n  \n  // Boolean columns\n  if \\(['is_online', 'verified', 'booking_enabled'].includes\\(col\\)\\) {\n    return v === 'true' || v === 'TRUE';\n  }\n  \n  return stripQuotes\\(v\\);\n}\n\nfunction convertVehicleValue\\(v, col\\) {\n  if \\(v === 'NULL' || v === 'null'\\) return null;\n  if \\(v === 'true'\\) return true;\n  if \\(v === 'false'\\) return false;\n  \n  // Array columns\n  if \\(['photos'].includes\\(col\\)\\) return parsePgArray\\(v\\);\n  \n  // JSON columns\n  if \\(['specs', 'pricing', 'high_season_dates'].includes\\(col\\)\\) return parseJsonb\\(v\\);\n  \n  // Numeric columns\n  if \\(['year', 'mileage_limit_per_day', 'extra_km_cost', 'quantity', 'sort_order'].includes\\(col\\)\\) {\n    const num = parseFloat\\(stripQuotes\\(v\\)\\);\n    return isNaN\\(num\\) ? null : num;\n  }\n  \n  return stripQuotes\\(v\\);\n}\n\nfunction convertOptionValue\\(v, col\\) {\n  if \\(v === 'NULL' || v === 'null'\\) return null;\n  if \\(v === 'true'\\) return true;\n  if \\(v === 'false'\\) return false;\n  \n  if \\(['price', 'sort_order'].includes\\(col\\)\\) {\n    return parseFloat\\(stripQuotes\\(v\\)\\);\n  }\n  \n  if \\(['is_mandatory', 'is_active'].includes\\(col\\)\\) {\n    return v === 'true' || v === 'TRUE';\n  }\n  \n  return stripQuotes\\(v\\);\n}\n\nfunction convertPromoValue\\(v, col\\) {\n  if \\(v === 'NULL' || v === 'null'\\) return null;\n  if \\(v === 'true'\\) return true;\n  if \\(v === 'false'\\) return false;\n  \n  if \\(col === 'discount_bps'\\) return parseInt\\(stripQuotes\\(v\\)\\);\n  \n  if \\(col === 'applies_to_establishment_ids'\\) return parsePgArray\\(v\\);\n  \n  if \\(['active', 'is_public'].includes\\(col\\)\\) {\n    return v === 'true' || v === 'TRUE';\n  }\n  \n  if \\(['starts_at', 'ends_at'].includes\\(col\\)\\) {\n    // Remove ::timestamptz cast\n    let ts = v.replace\\(/::timestamptz/g, ''\\);\n    return stripQuotes\\(ts\\);\n  }\n  \n  return stripQuotes\\(v\\);\n}\n\n// ============================================================================\n// MAIN\n// ============================================================================\nasync function main\\(\\) {\n  console.log\\('=== Rental Demo Seed Execution ===\\\\n'\\);\n  \n  // 1. Establishments\n  console.log\\('1. Parsing establishments...'\\);\n  const establishments = parseEstablishments\\(\\);\n  console.log\\(`   Found ${establishments.length} establishments`\\);\n  \n  if \\(establishments.length > 0\\) {\n    console.log\\('   Inserting establishments...'\\);\n    for \\(const est of establishments\\) {\n      const { error } = await supabase\n        .from\\('establishments'\\)\n        .upsert\\(est, { onConflict: 'id', ignoreDuplicates: true }\\);\n      if \\(error\\) {\n        console.log\\(`   ERROR inserting ${est.name}: ${error.message}`\\);\n      } else {\n        console.log\\(`   OK: ${est.name} \\(${est.city}\\)`\\);\n      }\n    }\n  }\n  \n  // 2. Vehicles\n  console.log\\('\\\\n2. Parsing vehicles...'\\);\n  const vehicles = parseVehicles\\(\\);\n  console.log\\(`   Found ${vehicles.length} vehicles`\\);\n  \n  if \\(vehicles.length > 0\\) {\n    console.log\\('   Inserting vehicles in batches...'\\);\n    const batchSize = 10;\n    let ok = 0, fail = 0;\n    for \\(let i = 0; i < vehicles.length; i += batchSize\\) {\n      const batch = vehicles.slice\\(i, i + batchSize\\);\n      const { error } = await supabase\n        .from\\('rental_vehicles'\\)\n        .upsert\\(batch, { onConflict: 'id', ignoreDuplicates: true }\\);\n      if \\(error\\) {\n        console.log\\(`   ERROR batch ${i}..${i+batch.length}: ${error.message}`\\);\n        // Try one by one\n        for \\(const v of batch\\) {\n          const { error: e2 } = await supabase\n            .from\\('rental_vehicles'\\)\n            .upsert\\(v, { onConflict: 'id', ignoreDuplicates: true }\\);\n          if \\(e2\\) { console.log\\(`   ERROR ${v.brand} ${v.model}: ${e2.message}`\\); fail++; }\n          else ok++;\n        }\n      } else {\n        ok += batch.length;\n      }\n    }\n    console.log\\(`   Done: ${ok} OK, ${fail} failed`\\);\n  }\n  \n  // 3. Options\n  console.log\\('\\\\n3. Parsing rental options...'\\);\n  const options = parseOptions\\(\\);\n  console.log\\(`   Found ${options.length} options`\\);\n  \n  if \\(options.length > 0\\) {\n    console.log\\('   Inserting options...'\\);\n    let ok = 0, fail = 0;\n    for \\(const opt of options\\) {\n      const { error } = await supabase\n        .from\\('rental_options'\\)\n        .insert\\(opt\\);\n      if \\(error\\) {\n        if \\(error.message.includes\\('duplicate'\\) || error.code === '23505'\\) {\n          ok++; // Already exists\n        } else {\n          console.log\\(`   ERROR ${opt.name} \\(${opt.establishment_id}\\): ${error.message}`\\);\n          fail++;\n        }\n      } else {\n        ok++;\n      }\n    }\n    console.log\\(`   Done: ${ok} OK, ${fail} failed`\\);\n  }\n  \n  // 4. Promo Codes\n  console.log\\('\\\\n4. Parsing promo codes...'\\);\n  const promos = parsePromoCodes\\(\\);\n  console.log\\(`   Found ${promos.length} promo codes`\\);\n  \n  if \\(promos.length > 0\\) {\n    console.log\\('   Inserting promo codes...'\\);\n    for \\(const promo of promos\\) {\n      const { error } = await supabase\n        .from\\('consumer_promo_codes'\\)\n        .upsert\\(promo, { onConflict: 'code', ignoreDuplicates: true }\\);\n      if \\(error\\) {\n        console.log\\(`   ERROR ${promo.code}: ${error.message}`\\);\n      } else {\n        console.log\\(`   OK: ${promo.code}`\\);\n      }\n    }\n  }\n  \n  console.log\\('\\\\n=== Seed execution complete ==='\\);\n}\n\nmain\\(\\).catch\\(err => { console.error\\('Fatal error:', err\\); process.exit\\(1\\); }\\);\nSCRIPT_EOF)",
      "Bash(for f in \"/Users/salaheddineaitnasser/Downloads/sam.ma - Official/.claude/worktrees/lucid-nobel/server/migrations/\"*.sql)",
      "Bash(do grep -l \"CREATE TABLE.*admin_notifications\" \"$f\")",
      "Bash(git status:*)",
      "Bash(git reset:*)",
      "Bash(for f in \"/Users/salaheddineaitnasser/Downloads/sam.ma - Official/server/migrations\"/*.sql)",
      "Bash(do grep -l \"CREATE TABLE.*pro_slots\" \"$f\")",
      "Bash(git log --oneline --all --grep=\"buffet\\\\|service\\\\|subcategory\" -i)",
      "Bash(# Check if there''s a .env issue - maybe VITE_* vars reference localhost cd \"\"/Users/salaheddineaitnasser/Downloads/sam.ma - Official\"\" && grep -i \"\"localhost\\\\|127\\\\.0\\\\.0\\\\.1\\\\|VITE_.*URL\"\" .env)",
      "Bash(jobs:*)",
      "Bash(SERVICE_KEY=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9namdoemd6a3h4b2dnb2NhZGxuIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2NjE3NTAyOCwiZXhwIjoyMDgxNzUxMDI4fQ.sniHdQ-EWw2ZdMj2gEjnrIvwLyinoLlVQ0aJL3-BNww\")",
      "Bash(__NEW_LINE_95461dd7fb8f7efa__ curl -s \"$SUPABASE_URL/rest/v1/admin_notifications?select=id,type,title,category,severity,read_at,created_at&order=created_at.desc&limit=20\" -H \"apikey: $SERVICE_KEY\" -H \"Authorization: Bearer $SERVICE_KEY\")",
      "Bash(__NEW_LINE_1a6e1fbbed2f658c__ echo \"\")",
      "Bash(__NEW_LINE_290e9fb95f153698__ curl -s \"$SUPABASE_URL/rest/v1/platform_settings?key=in.\\(RAMADAN_ENABLED,RAMADAN_START_DATE,RAMADAN_END_DATE\\)&select=key,value\" -H \"apikey: $SERVICE_KEY\" -H \"Authorization: Bearer $SERVICE_KEY\")",
      "Bash(__NEW_LINE_15a5c86291125720__ curl -sv \"$SUPABASE_URL/rest/v1/platform_settings?key=in.\\(RAMADAN_ENABLED,RAMADAN_START_DATE,RAMADAN_END_DATE\\)&select=key,value\" -H \"apikey: $SERVICE_KEY\" -H \"Authorization: Bearer $SERVICE_KEY\")",
      "mcp__Claude_in_Chrome__computer",
      "Bash(rsync:*)",
      "mcp__Claude_in_Chrome__find",
      "Bash(__NEW_LINE_8ccc1939fd6664d4__ grep -En \"^\\(export const|// ---|function \\)\" \"/Users/salaheddineaitnasser/Downloads/sam.ma - Official/server/routes/admin.ts\")",
      "Bash(pnpm test:*)",
      "Bash(pnpm vitest:*)",
      "Bash(while read line rest)",
      "Bash(do echo \"$line $rest\")",
      "Bash(/tmp/import_summary.md:*)",
      "Bash(/tmp/t9_imports_analysis.txt:*)",
      "Bash(/tmp/t7_imports_analysis.md:*)",
      "Bash(pnpm remove:*)",
      "Bash(gzip:*)",
      "Bash(for f in server/routes/*.ts)",
      "Bash(do if ! grep -q \"export function register\\\\|registerXxxRoutes\" \"$f\")",
      "Bash(then echo 1)",
      "Bash(comm:*)",
      "Bash(/tmp/refined_audit.py:*)",
      "Bash(/tmp/zquery_audit.py:*)",
      "Bash(/tmp/final_audit_report.py:*)",
      "Bash(/tmp/definitive_audit.md:*)",
      "Bash(/tmp/implementation_guide.md:*)",
      "mcp__Claude_Preview__preview_start"
    ]
  }
}
